(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,function(t,e){t.exports=Vue},,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",t._b({attrs:{scrollable:"",value:t.value,width:t.width},on:{input:function(e){return t.$emit("input",e)}}},"v-dialog",t.$attrs,!1),[n("v-card",[n("v-card-title",{staticClass:"headline lighten-2",attrs:{"primary-title":""}},[t._v("\n      "+t._s(t.title)+"\n      "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.close()}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",{staticStyle:{"max-height":"100%"}},[t._t("default")],2),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[t._t("actions")],2)],1)],1)};r._withStripped=!0;var a={props:{width:{type:Number,default:500},value:{type:Boolean},title:{type:String,default:""}},methods:{close:function(){console.log("close"),this.$emit("input",!1)}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/BaseDialog.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{"grid-list-xl":""}},[n("h1",[t._v(t._s(t.title))]),t._v(" "),t._t("default"),t._v(" "),n("v-row",[t._t("title"),t._v(" "),t._t("actions-left"),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"primary",on:{click:function(e){return t.$emit("click:create")}}},[t._v("\n      Create new\n    ")]),t._v(" "),t._t("actions-right")],2),t._v(" "),n("v-layout",{attrs:{wrap:""}},[n("Grid",{attrs:{loading:t.loading,items:t.items},scopedSlots:t._u([{key:"card",fn:function(e){var r=e.item;return[n("v-card",{staticClass:"show-actions-on-hover",on:{click:function(e){return t.itemClick(r)}}},[n("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:r.imageUrl||r.image||"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}}),t._v(" "),n("v-card-title",[n("div",{staticClass:"text-truncate",staticStyle:{width:"50%"}},[t._v("\n              "+t._s(r[t.titleKey]||r.name||r.title||"No title")+"\n            ")]),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"actions text-right"},[n("v-btn",{staticClass:"pull-right",attrs:{icon:"",text:""},on:{click:function(e){return e.stopPropagation(),t.editItem(r)}}},[n("v-icon",[t._v("edit")])],1)],1),t._v(" "),n("div",{staticClass:"actions text-right"},[n("v-btn",{staticClass:"pull-right",attrs:{icon:"",text:""},on:{click:function(e){return e.stopPropagation(),t.deleteItem(r)}}},[n("v-icon",[t._v("close")])],1)],1)],1),t._v(" "),t._t("card")],2)]}}],null,!0)})],1)],2)};r._withStripped=!0;var a=n(0),i=n.n(a),s={props:{name:{type:String,default:""},id:{type:String,default:""},title:{type:String,default:""},titleKey:{type:String,default:"title"}},data:function(){return{loading:!0,items:[],dialog:!1,form:{}}},watch:{$route:function(t,e){this.fetch()}},mounted:function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetch();case 1:case"end":return t.stop()}}),null,this)},methods:{fetch:function(){var t;return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,i.a.awrap(this.$service.getAll(this.name));case 4:t=e.sent,this.items=t;case 6:return e.prev=6,this.loading=!1,e.finish(6);case 9:case"end":return e.stop()}}),null,this,[[0,,6,9]])},deleteItem:function(t){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,i.a.awrap(this.$service.deleteById(this.name,t.id));case 4:this.items.splice(this.items.indexOf(t),1);case 5:return e.prev=5,this.loading=!1,e.finish(5);case 8:case"end":return e.stop()}}),null,this,[[0,,5,8]])},editItem:function(t){this.$emit("click:edit",t)},itemClick:function(t){this.$emit("click:item",t)}}},o=n(1),c=Object(o.a)(s,r,[],!1,null,null,null);c.options.__file="src/components/List.vue";e.default=c.exports},function(t,e,n){"use strict";n.r(e);var r={props:{value:{type:Boolean,default:!1},headers:{type:Array,default:function(){return{}}},row:{type:Object,default:function(){return{}}},selectable:{type:Boolean,default:!1}},computed:{selected:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},fields:function(){return this.row.item}},methods:{toggle:function(){this.selected=!this.selected},emitClick:function(){this.$emit("click")}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticStyle:{cursor:"pointer"},attrs:{active:t.selected},on:{click:t.emitClick}},[t.selectable?n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},on:{click:function(e){return e.stopPropagation(),t.toggle(e)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1):t._e(),t._v(" "),t._t("items",[t._l(t.headers,(function(e,r){return[n("td",{key:r},[e.value?[t._t("column-"+e.value,[t._v("\n            "+t._s(t.fields[e.value])+"\n          ")],{row:t.fields,field:t.fields[e.value]})]:t._e()],2)]}))],{item:t.fields})],2)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r={props:{value:{type:String,default:""}},data:function(){return{date:this.value,menu:!1}},watch:{date:function(t){this.$emit("input",t)},value:function(t){this.date=t}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g(t._b({attrs:{"prepend-icon":"event",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",t.$props,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{on:{input:function(e){t.menu=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r={props:{value:{type:String,default:""}},data:function(){return{time:null,date:null,menu:!1,menu2:!1,modal2:!1}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  "+t._s(t.date)+"\n  "+t._s(t.time)+"\n  "),n("v-row",{staticClass:"ma-0"},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g(t._b({attrs:{"prepend-icon":"event",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",t.$attrs,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{on:{input:function(e){t.menu=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":t.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.time=e},"update:return-value":function(e){t.time=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g(t._b({attrs:{"prepend-icon":"access_time",readonly:"",value:t.time}},"v-text-field",t.$attrs,!1),r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),t.menu2?n("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(e){return t.$refs.menu2.save(t.time)}},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i={props:{value:{type:String,default:""},nature:{type:String,default:""},target:{type:String,default:""},targetColumnName:{type:String,default:"name"},primaryKey:{type:String,default:"_id"}},data:function(){return{loading:!1,items:[]}},created:function(){var t,e;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.loading=!0,t=this.target,n.next=5,a.a.awrap(this.$service.getAll(t));case 5:e=n.sent,this.items=e;case 7:return n.prev=7,this.loading=!1,n.finish(7);case 10:case"end":return n.stop()}}),null,this,[[0,,7,10]])}},s=n(1),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-autocomplete",t._b({attrs:{value:t.value,loading:t.loading,items:t.items,clearable:"",multiple:"manyToOne"===t.nature,"item-value":t.primaryKey,"item-text":t.targetColumnName||"name"},on:{input:function(e){return t.$emit("input",e)}}},"v-autocomplete",t.$attrs,!1))],1)}),[],!1,null,null,null);e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.user?n("v-menu",{attrs:{"offset-y":"",on:"on"}},[n("v-btn",t._g({attrs:{icon:"",large:""}},t.on),[n("v-avatar",{attrs:{size:"32px",tile:""}},[n("v-icon",{attrs:{dark:""}},[t._v("account_circle")])],1)],1),t._v(" "),n("v-list",[n("v-list-tile",[n("v-list-tile-action",[n("v-icon",[t._v("account_circle")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(t.user.username||t.user.name||"-"))]),t._v(" "),n("v-list-tile-sub-title",[t._v(t._s(t.user.email))])],1)],1),t._v(" "),n("v-list-tile",{attrs:{to:"/selectcompany"}},[n("v-list-tile-action",[n("v-icon",[t._v("swap_horiz")])],1),t._v(" "),n("v-list-tile-title",[t._v("Switch company")])],1),t._v(" "),n("v-list-tile",{attrs:{to:"/accounts/edit/"+t.user._id}},[n("v-list-tile-action",[n("v-icon",[t._v("chat")])],1),t._v(" "),n("v-list-tile-title",[t._v("My profile")])],1),t._v(" "),n("v-list-tile",{attrs:{to:"/logout"}},[n("v-list-tile-action",[n("v-icon",[t._v("exit_to_app")])],1),t._v(" "),n("v-list-tile-title",[t._v("Sign out")])],1)],1)],1):[n("v-btn",{attrs:{flat:"",to:"/login"}},[t._v("\n      Sign in\n    ")])]],2)};r._withStripped=!0;var a={data:function(){return{}},computed:{user:function(){return this.$store.getters.getUser}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/TheProfileMenu.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),a=Object(r.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("v-progress-linear",{attrs:{height:8,color:"blue",indeterminate:""}})}),[],!1,null,null,null);e.default=a.exports},,,function(t,e){t.exports=Vuetify},,,,,,,,,,function(t,e,n){t.exports=n(61)},,function(t,e,n){"use strict";var r=n(5);n.n(r).a},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(6);n.n(r).a},,function(t,e,n){var r={"./AppSnackbar.vue":85,"./BaseDialog.vue":12,"./CollectionList.vue":63,"./ColumnSelector.vue":64,"./ConnectToServer.vue":65,"./DataTable/DataTable.vue":66,"./DataTable/DataTableHeader.vue":67,"./DataTable/components/ProgressLinear.vue":19,"./DataTable/components/Row.vue":14,"./DataTable/examples/Slots.vue":86,"./Dialog.vue":68,"./Dropzone.vue":69,"./DynamicForm/DynamicForm.vue":70,"./DynamicForm/Grid.vue":71,"./DynamicForm/ImageUpload/ImageResize.vue":62,"./DynamicForm/ImageUpload/InputAvatar.vue":72,"./DynamicForm/InputDate.vue":15,"./DynamicForm/InputDateTime.vue":16,"./DynamicForm/InputSelectRelation.vue":17,"./DynamicList.vue":73,"./Grid.vue":74,"./List.vue":13,"./Loader.vue":75,"./NavigationDrawer.vue":76,"./Snackbar.vue":77,"./StoreMessages.vue":78,"./Table.vue":79,"./TheProfileMenu.vue":18,"./Toggle.vue":80,"./ToggleJson.vue":87,"./Toolbar.vue":81,"./TypePermissions.vue":82,"./Types/TypesAddMultiple.vue":83,"./UploadPicture.vue":84};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=i,t.exports=a,a.id=54},function(t,e,n){"use strict";var r=n(7);n.n(r).a},function(t,e,n){"use strict";var r=n(8);n.n(r).a},function(t,e,n){"use strict";var r=n(9);n.n(r).a},function(t,e,n){"use strict";var r=n(10);n.n(r).a},function(t,e,n){"use strict";var r=n(11);n.n(r).a},function(t,e){t.exports=null},function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),i=n(0),s=n.n(i),o={},c=(n(34),n(1)),l=Object(c.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"inspire",dark:""}},[e("v-content",[e("v-layout",{staticStyle:{"min-height":"100%"},attrs:{"align-center":"","justify-center":"","pa-2":""}},[this._t("default")],2)],1)],1)}),[],!1,null,null,null).exports;window.localStorage.getItem("api");function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p={props:{},data:function(){return{title:"CxE Backend",dark:!1,drawer:!0}},computed:{_contentItems:function(t){return t.$store.state.types.items.filter((function(t){return t.showInNavigation})).map((function(t){return{path:"/content/".concat(t.name),icon:"perm_identity",text:t.name}}))},_items:function(t){return[{path:"/",text:"Dashboard"},{heading:"Content"},{path:"/media",text:"Files Upload"},{path:"/pages",text:"Pages"},{path:"/blocks",text:"Blocks"},{path:"/themes",text:"Themes"},{heading:"Data"}].concat(u(t._contentItems),[{heading:"General"},{path:"/roles",text:"Roles & Permissions"},{path:"/typebuilder",text:"Type Builder"},{path:"/settings",text:"Settings"}])}},mounted:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.$store.dispatch("plugins/getAll"),this.$store.dispatch("types/getAll")}catch(e){console.warn(e),this.$snackbar("Something went wrong")}case 1:case"end":return t.stop()}}),null,this)}},d=Object(c.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:t.dark}},[n("Toolbar",{attrs:{title:t.title},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}}),t._v(" "),n("NavigationDrawer",{attrs:{items:t._items},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}}),t._v(" "),n("v-content",[n("v-container",[t._t("default")],2)],1)],1)}),[],!1,null,null,null).exports;a.a.component("LoginLayout",l),a.a.component("DefaultLayout",d);var f={data:function(t){return{}},created:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.$route.query.token)&&window.localStorage.setItem("token",t);case 2:case"end":return e.stop()}}),null,this)}},v=Object(c.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("DefaultLayout",[e("router-view",{key:this.$route.fullPath}),this._v(" "),e("AppSnackbar")],1)}),[],!1,null,null,null).exports,m=Object(c.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  Not Found\n")])}),[],!1,null,null,null).exports,h={props:{name:{type:String,default:""}},data:function(){return{loading:!1,items:[],form:{},dialog:!1,collection:{titleKey:"title"},schema:[],props:{}}},computed:{_breadcrumbs:function(){return[{text:"Dashboard",disabled:!1,href:"/"},{text:"Collections",disabled:!1,href:"/collections"},{text:this.name,disabled:!0,href:"breadcrumbs_link_2"}]},_itemTitle:function(){return this.collection.titleKey||"title"}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(this.$service.getAll(this.name));case 2:this.items=t.sent;case 3:case"end":return t.stop()}}),null,this)},methods:{onClickItem:function(t){console.log("TODO")},onClickEdit:function(t){console.log("TODO")}}},b=Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-breadcrumbs",{attrs:{items:t._breadcrumbs}}),t._v(" "),n("Grid",{attrs:{items:t.items,"title-key":t._itemTitle},on:{"click:item":t.onClickItem,"click:edit":t.onClickEdit,"click:create":function(e){t.dialog=!0}}})],1)}),[],!1,null,null,null).exports,g={props:{name:{type:String,default:""},id:{type:String,default:""}},data:function(){return{props:{name:{type:"text",placeholder:"e.g. products, news or menus"},titleKey:{type:"text",placeholder:"specify the key of the card titles e.g. title"},schemaJson:{type:"textarea",placeholder:'e.g. { "title": :{"type":"text"}, }'}}}},methods:{onClickItem:function(t){this.$router.push("/collections/".concat(t.name,"?id=").concat(t.id))},onClickEdit:function(t){this.$router.push("/collections/edit/".concat(t.name))},onClickCreate:function(t){this.$router.push("/collections/new")}}},y=Object(c.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("List",{attrs:{id:t.id,name:t.name,"item-title":"url",props:t.props},on:{"click:item":t.onClickItem,"click:edit":t.onClickEdit,"click:create":t.onClickCreate},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n      Collections\n    ")]},proxy:!0}])}),t._v(" "),n("router-view")],1)}),[],!1,null,null,null).exports,_={props:{name:{type:String,default:""},id:{type:String,default:""}},data:function(){return{form:{}}},methods:{submit:function(t){console.log(t),this.$emit("submit",t)}}},w=[{path:"/collections",component:y,props:function(t){return{name:"collections"}},children:[{path:"new",component:Object(c.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-text-field",{attrs:{label:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("v-row",[n("v-btn",{attrs:{loading:t.loading,color:"primary",text:"",type:"submit"}},[t._v("\n        Create\n      ")])],1)],1)],1)}),[],!1,null,null,null).exports,props:function(t){return{showDialog:!0}}}]}],x=n(4),O=n.n(x),k=window.localStorage,j=O.a.post,S={user:{authenticated:!1},currentTokenData:function(){try{var t=k.getItem("access_token");return this.parseJwt(t)}catch(e){k.removeItem("access_token"),console.warn(e)}},parseJwt:function(t){if(!t)return null;var e=t.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(e))},sendResetLink:function(t){return j("/sendresetlink",{email:t})},checkAuth:function(){var t=k.getItem("access_token");t||"undefined"!==t?(O.a.defaults.headers.common.Authorization="Bearer ".concat(t),this.user.authenticated=!0):(O.a.defaults.headers.common.Authorization="",this.user.authenticated=!1),console.log("Axios Authorization set to","Bearer ".concat(t))},login:function(t){return j("/login",t,{headers:{Authorization:""}}).then((function(t){var e=t.access_token||t.token;return k.setItem("access_token",e),t}))},loginCall:function(t){return j("/login",t,{headers:{Authorization:""}})},signup:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j("/users",t,(function(t){e.user.authenticated=!0})).catch((function(t){n.error=t}))},logout:function(){k.removeItem("access_token"),this.user.authenticated=!1},getAuthHeader:function(){return{Authorization:"Bearer "+k.getItem("access_token")}}},$={data:function(){return{valid:!0,loading:!1,form:{},formErrors:{}}},methods:{validate:function(t){this.$refs.form.validate()&&this.submit(t)},submit:function(t){var e,n,r,a,i;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(this.$refs.form.validate()){o.next=2;break}return o.abrupt("return");case 2:return this.loading=!0,this.formErrors={},o.prev=4,o.next=7,s.a.awrap(S.sendResetLink(t.email));case 7:e=o.sent,console.log(e),e&&this.$router.push("/forgot/check"),o.next=18;break;case 12:o.prev=12,o.t0=o.catch(4),n=o.t0.response,r=n.data,a=r.errors,i=void 0===a?[]:a,console.log(i);case 18:return o.prev=18,this.loading=!1,o.finish(18);case 21:case"end":return o.stop()}}),null,this,[[4,12,18,21]])}}},P=Object(c.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("Forgot password")]),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.validate(t.form)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-card-text",[n("v-text-field",{attrs:{"error-messages":t.formErrors.email,rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"person",label:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("v-card-actions",[n("router-link",{attrs:{to:"/login"}},[t._v("\n          Back to login?\n        ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{loading:t.loading,disabled:t.loading,color:"primary"},on:{click:function(e){return e.stopPropagation(),t.submit(t.form)}}},[t._v("\n          Send it now, please!\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,E={},C=Object(c.a)(E,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e("v-card",{staticClass:"elevation-12"},[e("v-toolbar",{attrs:{dark:"",color:"primary"}},[e("v-toolbar-title",[this._v("Forgot password")]),this._v(" "),e("v-spacer")],1),this._v(" "),e("v-card-text",[this._v("\n      Check your email.\n    ")]),this._v(" "),e("v-card-actions",[e("router-link",{attrs:{to:"/login"}},[this._v("\n        Back to login?\n      ")]),this._v(" "),e("v-spacer")],1)],1)],1)}),[],!1,null,null,null).exports,D={props:{redirectTo:{type:String,default:"/"}},data:function(){return{valid:!0,loading:!1,form:{},formErrors:{},generalError:""}},methods:{validate:function(t){this.$refs.form.validate()&&this.submit(t)},submit:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.formErrors={},this.generalError="",e.prev=3,e.next=6,s.a.awrap(this.$store.dispatch("USER_LOGIN",t));case 6:e.sent&&this.$router.push(this.redirectTo),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),this.loading=!1,console.warn(e.t0),this.generalError=(n=e.t0.data.errors)[0].constructor===String?n[0]:"";case 15:this.loading=!1;case 16:case"end":return e.stop()}var n}),null,this,[[3,10]])}}},I={data:function(){return{valid:!0,loading:!1,form:{},formErrors:{}}},methods:{validate:function(t){this.$refs.form.validate()&&this.submit(t)},submit:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.formErrors={},e.prev=2,e.next=5,s.a.awrap(this.$store.dispatch("USER_CREATE",t));case 5:return e.sent,e.next=8,s.a.awrap(this.$store.dispatch("USER_LOGIN",t));case 8:e.sent&&this.$router.push("/createcompany"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.warn(e.t0),this.loading=!1;case 16:this.loading=!1;case 17:case"end":return e.stop()}}),null,this,[[2,12]])}}},T={mounted:function(){this.$store.dispatch("logoutUser")}},A={data:function(){return{valid:!0,loading:!1,form:{},formErrors:{}}},created:function(){this.form={email:this.$route.query.u,secret:this.$route.query.secret}},methods:{submit:function(t){var e,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.$refs.form.validate()){r.next=2;break}return r.abrupt("return");case 2:return this.loading=!0,this.formErrors={},r.prev=4,r.next=7,s.a.awrap(this.$store.dispatch("USER_CHANGEPASSWORD",t));case 7:r.next=14;break;case 9:r.prev=9,r.t0=r.catch(4),console.warn(r.t0),e=r.t0.errors,n=void 0===e?[]:e,this.formErrors=n;case 14:this.loading=!1;case 15:case"end":return r.stop()}}),null,this,[[4,9]])}}},B=[{path:"/login",component:Object(c.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("Login")]),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-card-text",[n("v-alert",{attrs:{value:t.generalError,dismissible:"",color:"error"}},[t._v("\n        "+t._s(t.generalError)+"\n      ")])],1),t._v(" "),n("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.validate(t.form)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-card-text",[n("v-text-field",{attrs:{label:"Login",placeholder:"Login","error-messages":t.formErrors.email,rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"person",name:"login",type:"text"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),n("v-text-field",{ref:"input",attrs:{id:"password",label:"Password","error-messages":t.formErrors.password||t.formErrors[0],placeholder:"Password",rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"lock",name:"password",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("v-card-actions",[n("router-link",{attrs:{to:"/forgot"}},[t._v("\n          Forgot password?\n        ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{type:"submit",loading:t.loading,disabled:t.loading,color:"primary"}},[t._v("\n          Login\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,meta:{layout:"LoginLayout",public:!0,onlyWhenLoggedOut:!0},props:{redirectTo:"/selectcompany"}},{path:"/create",component:Object(c.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("Create")]),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.validate(t.form)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-card-text",[n("v-text-field",{attrs:{label:"Your email",placeholder:"e.g. abc@abc.com","error-messages":t.formErrors.email,rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"person",name:"login",type:"text"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),n("v-text-field",{ref:"input",attrs:{id:"password",label:"Password","error-messages":t.formErrors.password||t.formErrors.body,placeholder:"Your secret password",rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"lock",name:"password",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("v-card-actions",[n("router-link",{attrs:{to:"/login"}},[t._v("\n          Already an account?\n        ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{type:"submit",loading:t.loading,disabled:t.loading,color:"primary"}},[t._v("\n          Create account\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,meta:{layout:"LoginLayout"}},{path:"/logout",component:Object(c.a)(T,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",{staticClass:"elevation-5 text-xs-center"},[e("span",{staticClass:"headline"},[this._v("Bye Bye")]),e("br"),this._v(" "),e("span",{staticClass:"subheading"},[this._v("Till next time")]),e("br"),this._v(" "),e("v-btn",{attrs:{outlined:"",to:"/login"}},[this._v("\n    Go back to login\n  ")])],1)}),[],!1,null,null,null).exports,meta:{layout:"LoginLayout"}},{path:"/forgot",component:P,meta:{layout:"LoginLayout"}},{path:"/forgot/check",component:C,meta:{layout:"LoginLayout"}},{path:"/reset/:secret",component:Object(c.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticStyle:{"min-height":"100%"},attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("Reset password")]),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-card-text",[n("v-text-field",{attrs:{type:"password","error-messages":t.formErrors.password,rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"lock",label:"New password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),n("v-text-field",{attrs:{type:"password","error-messages":t.formErrors.password2,rules:[function(t){return!!t||"Item is required"}],required:"","prepend-icon":"lock",label:"Repeat password"},model:{value:t.form.password2,callback:function(e){t.$set(t.form,"password2",e)},expression:"form.password2"}})],1),t._v(" "),n("v-card-actions",[n("router-link",{attrs:{to:"/login"}},[t._v("\n            Back to login?\n          ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{loading:t.loading,disabled:t.loading,color:"primary"},on:{click:function(e){return e.stopPropagation(),t.submit(t.form)}}},[t._v("\n            Change password\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,meta:{layout:"LoginLayout"}}];function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",r=document.createElement("a");r.style.display="none",document.body.appendChild(r),r.href=window.URL.createObjectURL(new Blob([t],{type:n})),r.setAttribute("download",e),r.click(),window.URL.revokeObjectURL(r.href),document.body.removeChild(r)}var R={data:function(){return{form:this.$store.state.settings}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetch();case 1:case"end":return t.stop()}}),null,this)},methods:{onInput:function(t){console.log("Drop",t),this.form=t},fetch:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}))},exportProfile:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t={settings:this.$store.state.settings,types:this.$store.state.types},L(JSON.stringify(t,!0,2),"superadmin.json","text/json");case 3:case"end":return e.stop()}}),null,this)},submit:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),this.$store.commit("settings/set",t);case 2:case"end":return e.stop()}}),null,this)}}},N=Object(c.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-card",[n("v-container",[n("h1",[t._v("Settings")])]),t._v(" "),n("v-card-text",[n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-text-field",{attrs:{label:"Server"},model:{value:t.form.api,callback:function(e){t.$set(t.form,"api",e)},expression:"form.api"}}),t._v(" "),n("v-text-field",{attrs:{hint:"Specify here the Authorization headers E.G: ApiKey <thekey> or Bearer <token>",label:"Authorization header"},model:{value:t.form.headers.Authorization,callback:function(e){t.$set(t.form.headers,"Authorization",e)},expression:"form.headers.Authorization"}}),t._v(" "),n("v-text-field",{attrs:{placeholder:"E.g. for sql 'id' or mongodb '_id'",label:"Default primary key"},model:{value:t.form.defaultPrimaryKey,callback:function(e){t.$set(t.form,"defaultPrimaryKey",e)},expression:"form.defaultPrimaryKey"}}),t._v(" "),t.form.useTypesFromJson?[n("v-textarea",{attrs:{placeholder:"Paste here your types",label:"Types"},model:{value:t.form.types,callback:function(e){t.$set(t.form,"types",e)},expression:"form.types"}})]:t._e(),t._v(" "),n("v-row",{staticClass:"ma-0"},[n("v-btn",{staticClass:"primary",attrs:{type:"submit"}},[t._v("\n            Save\n          ")]),t._v(" "),n("v-spacer")],1)],2)],1)],1),t._v(" "),n("v-card",{staticClass:"mt-5"},[n("v-container",[n("div",{staticClass:"d-flex"},[n("h1",[t._v("Import / export")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{outlined:""},on:{click:t.exportProfile}},[t._v("\n          Export settings\n        ")])],1)]),t._v(" "),n("v-card-text",[n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-row",{staticClass:"ma-0"},[n("Dropzone",{on:{input:t.onInput}}),t._v(" "),n("v-spacer")],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,U={data:function(){return{form:{}}},methods:{submit:function(t){console.log(t),this.$emit("submit",t)}}};function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={components:{Form:Object(c.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-text-field",{attrs:{label:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("v-btn",{staticClass:"primary",attrs:{type:"submit"}},[t._v("\n    Add\n  ")])],1)}),[],!1,null,null,null).exports},data:function(){return{ROW_KEY:"id",items:[],loading:!1,selection:[],headers:[{value:"name"},{value:"description"},{value:"fields"}]}},computed:{_defaultPrimaryKey:function(){return this.$store.state.settings.defaultPrimaryKey},breadcrumbs:function(){return[{text:"Typebuilder"}]}},created:function(){this.fetch()},methods:{fetch:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.getAll("types"));case 4:return t=e.sent,this.items=t,e.abrupt("return",t);case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),null,this,[[0,,7,10]])},clickImport:function(){var t,e,n=this,r=arguments;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],a.prev=1,this.loading=!0,e=t.map((function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.$service.create("types",{attributes:[],name:t}));case 1:case"end":return e.stop()}}))})),a.next=6,s.a.awrap(Promise.all(e));case 6:return a.prev=6,this.loading=!1,a.finish(6);case 9:this.fetch();case 10:case"end":return a.stop()}}),null,this,[[1,,6,9]])},clickAutodetect:function(){var t,e,n=this,r=arguments;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],a.prev=1,this.loading=!0,e=t.map((function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.autoDetect(t.name));case 1:case"end":return e.stop()}}))})),a.next=6,s.a.awrap(Promise.all(e));case 6:return a.prev=6,this.loading=!1,a.finish(6);case 9:this.fetch();case 10:case"end":return a.stop()}}),null,this,[[1,,6,9]])},submit:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.create("types",K({attributes:[]},t)));case 4:return e.prev=4,this.loading=!1,e.finish(4);case 7:this.fetch();case 8:case"end":return e.stop()}}),null,this,[[0,,4,7]])},autoDetect:function(t){var e,n,r,a,i;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,this.loading=!0,o.next=4,s.a.awrap(this.$serviceFactory(t).getOne());case 4:return e=o.sent,n=e,r=Object.keys(n),a={attributes:r.map((function(t){return{name:t,editable:!0,type:"string"}}))},o.next=10,s.a.awrap(this.$serviceFactory("types").getOne({name:t}).then((function(t){return t._id})));case 10:return i=o.sent,o.next=13,s.a.awrap(this.$serviceFactory("types").putById(i,a));case 13:return o.abrupt("return",o.sent);case 16:o.prev=16,o.t0=o.catch(0),console.warn(o.t0),this.$snackbar("Something went wrong");case 20:return o.prev=20,this.loading=!1,o.finish(20);case 23:case"end":return o.stop()}}),null,this,[[0,16,20,23]])},showInNav:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.setToAll((function(t){return K({},t,{showInNavigation:!0})}),t);case 1:case"end":return e.stop()}}),null,this)},hideInNav:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.setToAll((function(t){return K({},t,{showInNavigation:!1})}),t);case 1:case"end":return e.stop()}}),null,this)},setToAll:function(t){var e,n,r,a,i=this,o=arguments;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=o.length>1&&void 0!==o[1]?o[1]:[],c.prev=1,this.loading=!0,n=this.$serviceFactory("types"),r=e.map((function(e){var r;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t(e),a.next=3,s.a.awrap(n.putById(e[i._defaultPrimaryKey],r));case 3:case"end":return a.stop()}}))})),c.next=7,s.a.awrap(Promise.all(r));case 7:return c.next=9,s.a.awrap(this.fetch());case 9:a=c.sent,this.$store.commit("types/set",a),console.log(a),c.next=18;break;case 14:c.prev=14,c.t0=c.catch(1),console.warn(c.t0),this.$snackbar("Something went wrong");case 18:return c.prev=18,this.loading=!1,c.finish(18);case 21:case"end":return c.stop()}}),null,this,[[1,14,18,21]])},getAttributes:function(t){return t.attributes||[]},rowClick:function(t){this.$router.push("/typebuilder/".concat(t.name))}}},G=Object(c.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-breadcrumbs",{attrs:{items:t.breadcrumbs,divider:">"}}),t._v(" "),n("v-card",[n("v-card-title",{staticClass:"title"},[t._v("\n      "+t._s(t.items.length)+" content types are available\n      "),n("v-spacer"),t._v(" "),t.selection.length?n("div",[n("v-btn",{staticClass:"mx-1",attrs:{outlined:"",loading:t.loading},on:{click:function(e){return t.showInNav(t.selection)}}},[t._v("\n          Show in menu\n        ")]),t._v(" "),n("v-btn",{staticClass:"mx-1",attrs:{outlined:"",loading:t.loading},on:{click:function(e){return t.hideInNav(t.selection)}}},[t._v("\n          Hide in menu\n        ")]),t._v(" "),n("v-btn",{staticClass:"mx-1",attrs:{outlined:"",loading:t.loading},on:{click:function(e){return t.clickAutodetect(t.selection)}}},[t._v("\n          Autodetect\n        ")])],1):t._e(),t._v(" "),n("Toggle",{attrs:{label:"Add new type"}},[n("Form",{on:{submit:t.submit}}),t._v(" "),n("TypesAddMultiple",{on:{submit:t.clickImport}})],1)],1),t._v(" "),n("v-data-table",{attrs:{"show-select":"",items:t.items,headers:t.headers,"item-key":"name"},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"item.fields",fn:function(e){e.value;var n=e.item;return[t._v("\n        "+t._s(n.attributes?n.attributes.length:"?")+" field(s)\n      ")]}}]),model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}})],1)],1)}),[],!1,null,null,null).exports,M={props:{value:{type:Object,default:function(){return{}}}},data:function(){return{form:this.value,loading:!1,items:[],targetColumnItems:[],relationTypes:[{text:"oneToOne"},{text:"manyToOne"}]}},computed:{_targetColumnItems:function(){var t=this.form.target,e=this.items.find((function(e){return e.name===t}));return console.log(t,e),e?e.attributes.map((function(t){return t.name})):[]}},watch:{value:function(t){this.form=t},form:{handler:function(t){console.log(t),this.$emit("input",t)},deep:!0}},created:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.getAll("types"));case 4:t=e.sent,console.log(t),this.items=t;case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),null,this,[[0,,7,10]])}},q=Object(c.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[n("v-col",[n("v-select",{attrs:{loading:t.loading,label:"With",items:t.items,"item-text":"name"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}})],1),t._v(" "),n("v-col",[n("v-select",{attrs:{loading:t.loading,label:"Type",items:t.relationTypes,"item-text":"text"},model:{value:t.form.nature,callback:function(e){t.$set(t.form,"nature",e)},expression:"form.nature"}})],1),t._v(" "),n("v-col",[n("v-autocomplete",{attrs:{loading:t.loading,label:"Display key",items:t._targetColumnItems,"item-text":"name"},model:{value:t.form.targetColumnName,callback:function(e){t.$set(t.form,"targetColumnName",e)},expression:"form.targetColumnName"}})],1)],1)}),[],!1,null,null,null).exports,J=[{text:"string",value:"string",type:"string"},{text:"password",value:"password",description:"Will hash the field",type:"string"},{text:"number",value:"number",type:"integer"},{text:"textarea",value:"textarea",type:"string"},{text:"boolean",value:"boolean",type:"string"},{text:"image",value:"image",type:"string"},{text:"avatar",value:"avatar",type:"string"},{text:"wysiwyg",value:"wysiwyg",type:"string"},{text:"json",value:"json",type:"string"},{text:"enum",value:"enum",type:"string"},{text:"date",value:"date",type:"string"},{text:"datetime",value:"datetime",type:"date"},{text:"relation",value:"relation",type:"string"}],Y=[{text:"text",value:"text"},{text:"number",value:"number"},{text:"wysiwyg",value:"wysiwyg"},{text:"image",value:"image"},{text:"date",value:"date"}];function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id",n={};return t.forEach((function(t){var r=t[e];n[r]=t})),n},Q={components:{InputRelation:q},props:{name:{type:String,default:""}},data:function(t){return{snackbar:!1,loading:!1,dialog:!1,TYPES:J,TYPES_FORM:Y,TYPES_LOOKUP:X(J,"value"),form:{attributes:[]}}},computed:{_defaultPrimaryKey:function(){return this.$store.state.settings.defaultPrimaryKey},_id:function(){return this.form[this._defaultPrimaryKey]||this.form._id},breadcrumbs:function(){return[{text:"Typebuilder",disabled:!1,href:"#/typebuilder"},{text:this.name,disabled:!0}]},_attributes:function(){return this.form.attributes},_relations:function(){return this._attributes.filter((function(t){return t.target}))}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetch();case 1:case"end":return t.stop()}}),null,this)},methods:{fetch:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$serviceFactory("types").getOne({name:this.name}));case 4:t=e.sent,console.log(t),this.form=V({},this.form,{},t,{attributes:t.attributes||[]}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0),this.snackbar=!0;case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),null,this,[[0,9,13,16]])},toggleEdit:function(t){console.log(t),this.dialog=!0},deleteItem:function(t){!function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}(this._attributes,t)},addField:function(){this._attributes.push({name:"",editable:!0,type:"string"})},edit:function(t){this.dialog=!0},saveChanges:function(t){var e;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),n.prev=1,this.loading=!0,n.next=5,s.a.awrap(this.$serviceFactory("types").putById(this._id,t));case 5:e=n.sent,console.log(e),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.warn(n.t0),this.$snackbar("Something went wrong","error");case 13:return n.prev=13,this.loading=!1,n.finish(13);case 16:case"end":return n.stop()}}),null,this,[[1,9,13,16]])},deleteType:function(t){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,s.a.awrap(this.$serviceFactory("types").deleteById(this._id));case 4:e=t.sent,console.log(e);case 6:return t.prev=6,this.loading=!1,t.finish(6);case 9:case"end":return t.stop()}}),null,this,[[0,,6,9]])},autoDetect:function(){var t,e,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.loading=!0,r.next=4,s.a.awrap(this.$serviceFactory(this.name).getOne());case 4:t=r.sent,e=t,n=Object.keys(e),this.form.attributes=n.map((function(t){return{name:t,editable:!0,type:"string"}})),console.log(t),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.warn(r.t0),this.$snackbar("Something went wrong");case 15:return r.prev=15,this.loading=!1,r.finish(15);case 18:case"end":return r.stop()}}),null,this,[[0,11,15,18]])},createTable:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.fetch("/_tasks/create/".concat(this.name),{method:"POST",body:JSON.stringify(t)}));case 4:this.$emit("success");case 5:return e.prev=5,this.loading=!1,this.$emit("input",!1),e.finish(5);case 9:case"end":return e.stop()}}),null,this,[[0,,5,9]])},dropTable:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,s.a.awrap(this.$service.fetch("/_tasks/drop/".concat(this.name),{method:"GET"}));case 4:this.$emit("success");case 5:return t.prev=5,this.loading=!1,this.$emit("input",!1),t.finish(5);case 9:case"end":return t.stop()}}),null,this,[[0,,5,9]])}}};n(52);function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nt=[{path:"/typebuilder",component:G,props:!0},{path:"/typebuilder/:name",component:Object(c.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-breadcrumbs",{attrs:{items:t.breadcrumbs,divider:">"}}),t._v(" "),n("v-spacer"),t._v(" "),n("span",{staticClass:"ma-1"},[t._v("Admin")]),t._v(" "),n("v-btn",{staticClass:"mx-2",attrs:{loading:t.loading},on:{click:function(e){return t.createTable(t.form)}}},[t._v("\n      create table\n    ")]),t._v(" "),n("v-btn",{staticClass:"mx-2 error",attrs:{loading:t.loading},on:{click:t.dropTable}},[t._v("\n      drop table\n    ")])],1),t._v(" "),n("small",[t._v("\n    name: "+t._s(t.form.name)+" /\n    #"+t._s(t._id)+"\n  ")]),t._v(" "),n("v-card",[n("v-card-title",[n("div",[t._v("\n        "+t._s(t._attributes&&t._attributes.length)+" fields including "+t._s(t._relations.length)+" relationships\n        "),t._v(" "),n("v-switch",{attrs:{label:"Show in navigation"},model:{value:t.form.showInNavigation,callback:function(e){t.$set(t.form,"showInNavigation",e)},expression:"form.showInNavigation"}}),t._v(" "),n("Toggle",{attrs:{label:"View as Json"}},[t._v("\n          "+t._s(t.form)+"\n        ")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"primary",on:{click:function(e){return t.saveChanges(t.form)}}},[t._v("\n        Save changes\n      ")]),t._v(" "),n("v-btn",{staticClass:"mx-2 error",on:{click:function(e){return t.deleteType(t.form)}}},[t._v("\n        Delete type\n      ")])],1),t._v(" "),t.loading?n("Loader"):t._e(),t._v(" "),t._attributes.length?t._e():[n("center",[n("p",[t._v("No fields have been added.")]),t._v(" "),n("p",[t._v("If the table has already data in it use autodetect.")]),t._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{outlined:""},on:{click:t.autoDetect}},[t._v("\n          Autodetect\n        ")])],1)],t._v(" "),t._l(t._attributes||[],(function(e,r){return[n("div",{key:r},[n("v-list-item",{staticClass:"reveal-on-hover"},[n("v-row",{staticClass:"ma-0"},[e.editable?[n("v-col",{attrs:{xs4:""}},[n("v-text-field",{attrs:{label:"Name",placeholder:"Add new field","hide-details":""},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"d-flex"},[n("v-autocomplete",{staticStyle:{"max-width":"200px"},attrs:{label:"Type",items:t.TYPES,hint:"Database type: "+t.TYPES_LOOKUP[e.type].type},model:{value:e.type,callback:function(n){t.$set(e,"type",n)},expression:"item.type"}})],1),t._v(" "),"relation"===e.type?[n("InputRelation",{model:{value:t._attributes[r],callback:function(e){t.$set(t._attributes,r,e)},expression:"_attributes[index]"}})]:t._e()],2)]:[n("v-col",{attrs:{xs4:""}},[t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),n("v-col",{attrs:{cols:"6"}},[e.type?n("div",[t._v("\n                  "+t._s(e.type||"-")+"\n                ")]):n("div",[t._v("\n                  Relation with "+t._s(e.target)+" ("+t._s(e.key)+")\n                ")])])],t._v(" "),n("v-col",{attrs:{xs2:""}},[n("v-btn",{staticClass:"hide-by-default",attrs:{icon:""},on:{click:function(n){return t.deleteItem(e)}}},[n("v-icon",[t._v("close")])],1)],1)],2)],1),t._v(" "),n("v-divider")],1)]})),t._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{outlined:""},on:{click:t.addField}},[t._v("\n      Add another field\n    ")])],2)],1)}),[],!1,null,null,null).exports,props:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.params)}}];function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var st={components:{},props:{typeSlug:{type:String,default:"users"},typeId:{type:String,default:""}},data:function(){return{customizedHeaders:[],showColumnSelector:!1,baseUrl:"",type:{},items:[],totalItems:0,loading:!1,headers:[],options:{},selected:[]}},computed:{_defaultPrimaryKey:function(){return this.$store.state.settings.defaultPrimaryKey},_items:function(){return this.items},_headers:function(){var t=this.customizedHeaders;return t.length?t:this._headersAll},_headersAll:function(){return it(this.headers.map((function(t){return{text:t.name,value:t.name}})))},_breadcrumbs:function(){return[{text:"Content",disabled:!1,href:"#/content"},{text:this.typeSlug,disabled:!0}]}},watch:{$route:function(t,e){e.params.typeSlug!==t.params.typeSlug&&this.fetch()},options:{handler:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(this.fetch(t));case 2:case"end":return e.stop()}}),null,this)},deep:!0}},methods:{getHeadersAndSetType:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$serviceFactory("types").getOne({name:this.typeSlug}));case 4:return t=e.sent,this.type=t,this.customizedHeaders=t.customizedHeaders||[],e.abrupt("return",t.attributes);case 10:e.prev=10,e.t0=e.catch(0),console.warn(e.t0),this.$router.push("/");case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),null,this,[[0,10,14,17]])},rowClick:function(t){var e=t[this.type.key||"id"]||t._id;this.$router.push("/content/".concat(this.typeSlug,"/edit/").concat(e))},fetch:function(){var t,e,n,r,a,i,o=arguments;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},c.next=3,s.a.awrap(this.getHeadersAndSetType());case 3:return e=c.sent,this.headers=e,(n={_start:(t.page-1)*t.itemsPerPage||0,_limit:t.itemsPerPage||10})._embed=["user"],c.prev=7,this.loading=!0,c.next=11,s.a.awrap(this.$service.getWithTotalItems(this.typeSlug,n));case 11:r=c.sent,a=r.items,i=r.totalItems,this.totalItems=i,this.items=a;case 15:return c.prev=15,this.loading=!1,c.finish(15);case 18:case"end":return c.stop()}}),null,this,[[7,,15,18]])},deleteMultiple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.map(this.deleteItem)},deleteItem:function(t){var e=this,n=this._defaultPrimaryKey,r=t[n],a=this.items;return this.$service.deleteById(this.typeSlug,r).then((function(){var t=a.filter((function(t){return t[n]===r}))[0];a.splice(a.indexOf(t),1),e.selected=[],e.$snackbar("Item removed")}))},onColumnInput:function(t){this.$store.dispatch("types/update",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){at(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.type,{customizedHeaders:t})),this.customizedHeaders=t}}},ot=Object(c.a)(st,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("router-view"),t._v(" "),t._t("default"),t._v(" "),n("v-row",{staticClass:"ma-0"},[n("v-breadcrumbs",{attrs:{items:t._breadcrumbs,divider:">"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{outlined:"",to:"/typebuilder/"+t.typeSlug+"/"+t.typeId}},[t._v("\n      Edit\n    ")])],1),t._v(" "),n("v-card",[n("v-row",{staticClass:"ma-0 pa-3"},[n("v-btn",{staticClass:"primary",attrs:{to:"/content/"+t.typeSlug+"/new"}},[t._v("\n        New item\n      ")]),t._v(" "),n("v-btn",{staticClass:"mx-2",attrs:{icon:""},on:{click:function(e){return t.fetch(t.options)}}},[n("v-icon",[t._v("refresh")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-dialog",{attrs:{width:500},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"mx-2",attrs:{outlined:""}},r),[t._v("\n            Columns\n          ")])]}}]),model:{value:t.showColumnSelector,callback:function(e){t.showColumnSelector=e},expression:"showColumnSelector"}},[t._v(" "),n("v-card",{staticClass:"pa-2"},[n("ColumnSelector",{attrs:{headers:t._headersAll},on:{input:t.onColumnInput},model:{value:t.customizedHeaders,callback:function(e){t.customizedHeaders=e},expression:"customizedHeaders"}})],1)],1)],1),t._v(" "),t.selected.length?[n("v-toolbar",{staticClass:"ma-0",attrs:{dense:"",fixed:"",flat:"",absolute:"",width:"100%",color:"blue blue--text lighten-4"}},[n("v-row",{attrs:{align:"center"}},[t._v("\n          "+t._s(t.selected.length)+" "+t._s(1===t.selected.length?"object":"objects")+" selected\n          "),n("v-btn",{attrs:{text:"",color:"blue"},on:{click:function(e){t.selected=[]}}},[t._v("\n            Cancel\n          ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",icon:"",color:"red"},on:{click:function(e){return t.deleteMultiple(t.selected)}}},[n("v-icon",[t._v("delete")])],1)],1)],1)]:t._e(),t._v(" "),n("v-data-table",{attrs:{loading:t.loading,headers:t._headers,items:t.loading?[]:t._items,"server-items-length":t.totalItems,options:t.options,"show-select":!0,"item-key":t._defaultPrimaryKey},on:{"update:options":function(e){t.options=e},"click:row":t.rowClick},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],2)],2)}),[],!1,null,null,null).exports,ct={components:{},props:{typeSlug:{type:String,default:"users"}},data:function(){return{baseUrl:"",type:{},items:[],loading:!1,headers:[]}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetch();case 1:case"end":return t.stop()}}),null,this)},methods:{fetch:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.get("types"));case 4:t=e.sent,this.items=t,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0),this.$router.push("/");case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),null,this,[[0,8,12,15]])}}},lt=Object(c.a)(ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("h1",[t._v("All content")]),t._v(" "),n("Grid",{attrs:{items:t.items,loading:t.loading},scopedSlots:t._u([{key:"card",fn:function(e){var r=e.item;return[n("v-card",{attrs:{to:"/content/"+r.name}},[n("v-card-title",[t._v("\n          "+t._s(r.name)+"\n        ")])],1)]}}])})],1)}),[],!1,null,null,null).exports;function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dt={components:{BaseDialog:n(12).default},props:{id:{type:String,default:null},typeSlug:{type:String,default:"notset"},typeId:{type:String,default:null}},data:function(){return{loading:!1,fields:[],form:{},type:{}}},computed:{_primaryKey:function(){return this.$store.state.settings.defaultPrimaryKey},_name:function(){return this.typeSlug},_id:function(){return this.id},_fields:function(){return this.type.attributes?this.type.attributes.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({name:t.name},t)})):[]}},watch:{$route:function(t,e){this.fetch()}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetch();case 1:case"end":return t.stop()}}),null,this)},methods:{fetch:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(this.fetchFields());case 2:this.id&&this.fetchData(this.id);case 3:case"end":return t.stop()}}),null,this)},fetchFields:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$serviceFactory("types").getOne({name:this.typeSlug}));case 4:return t=e.sent,this.type=t,e.abrupt("return",t);case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),null,this,[[0,,7,10]])},fetchData:function(t){var e;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.loading=!0,n.next=4,s.a.awrap(this.$serviceFactory(this.typeSlug).getById(t,{params:{}}));case 4:e=n.sent,console.log(e),this.form=e;case 7:return n.prev=7,this.loading=!1,n.finish(7);case 10:case"end":return n.stop()}}),null,this,[[0,,7,10]])},validate:function(t){this.$refs.form.validate()&&this.submit(t)},deleteItem:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.awrap(this.$serviceFactory(this.typeSlug).deleteById(t[this.type.key||this._defaultPrimaryKey],t));case 3:this.$router.push("/content/".concat(this.typeSlug)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}}),null,this,[[0,6]])},submit:function(t){var e;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.loading=!0,n.next=4,s.a.awrap(this.$serviceFactory(this.typeSlug).createOrUpdateById(this._id,t));case 4:e=n.sent,console.log(e),this.$emit("success"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),this.$snackbar("Ai, something went wrong",n.t0);case 12:return n.prev=12,this.loading=!1,this.$snackbar("Item saved"),n.finish(12);case 16:case"end":return n.stop()}}),null,this,[[0,9,12,16]])}}},ft=Object(c.a)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("BaseDialog",{attrs:{title:"Add / edit "+t._name,value:!0},on:{input:function(e){return t.$router.push("/content/"+t._name)}},scopedSlots:t._u([{key:"actions",fn:function(){return[n("v-btn",{attrs:{loading:t.loading,color:"error",text:""},on:{click:function(e){return t.deleteItem(t.form)}}},[t._v("\n        Delete\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{loading:t.loading,color:"primary",text:"",type:"submit"},on:{click:function(e){return t.validate(t.form)}}},[t._v("\n        Apply\n      ")])]},proxy:!0}])},[n("small",[t._v("#$"+t._s(t._id))]),t._v(" "),n("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.validate(t.form)}}},[n("DynamicForm",{attrs:{fields:t._fields,"primary-key":t._primaryKey},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1)],1)],1)}),[],!1,null,null,null).exports;function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){ht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bt=[{path:"/content",component:lt,props:!0},{name:"table",path:"/content/:typeSlug",component:ot,props:function(t){return mt({},t.params)},children:[{path:"edit/:id",component:ft,props:function(t){return mt({},t.params)}},{path:"new",component:ft,props:function(t){return mt({},t.params)}}]}],gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-breadcrumbs",{attrs:{items:t.breadcrumbs,divider:">"}}),t._v(" "),n("v-card",[n("v-card-title",{staticClass:"title"},[t._v("\n      "+t._s(t.items.length)+" roles are available\n      "),n("v-spacer"),t._v(" "),n("Toggle",{attrs:{label:"Add new role"}},[n("Form",{on:{submit:t.submit}})],1)],1),t._v(" "),t._l(t.items,(function(e,r){return n("v-list-item",{key:r,attrs:{to:"/roles/"+e.name}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs4:""}},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),n("v-flex",{attrs:{xs4:""}},[t._v("\n          "+t._s(e.description||"-")+"\n        ")]),t._v(" "),n("v-flex",{attrs:{xs4:""}},[t._v("\n          "+t._s(e.attributes?e.attributes.length:"?")+" field(s)\n        ")])],1)],1)}))],2)],1)};gt._withStripped=!0;var yt={data:function(){return{form:{}}},methods:{submit:function(t){console.log(t),this.$emit("submit",t)}}};function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ot={components:{Form:Object(c.a)(yt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-text-field",{attrs:{label:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("v-btn",{staticClass:"primary",attrs:{type:"submit"}},[t._v("\n    Add\n  ")])],1)}),[],!1,null,null,null).exports},data:function(){return{ROW_KEY:"id",items:[],loading:!1}},computed:{breadcrumbs:function(){return[{text:"Typebuilder"}]}},created:function(){this.fetch()},methods:{fetch:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.getAll("roles"));case 4:t=e.sent,console.log(t),this.items=t;case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),null,this,[[0,,7,10]])},submit:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$service.create("roles",wt({attributes:[]},t)));case 4:return e.prev=4,this.loading=!1,e.finish(4);case 7:this.fetch();case 8:case"end":return e.stop()}}),null,this,[[0,,4,7]])},getAttributes:function(t){return t.attributes||[]}}},kt=Object(c.a)(Ot,gt,[],!1,null,null,null);kt.options.__file="src/views/roles/List.vue";var jt=kt.exports,St=[{text:"string",value:"string"},{text:"number",value:"number"},{text:"textarea",value:"textarea"},{text:"boolean",value:"boolean"},{text:"image",value:"image"},{text:"json",value:"json"},{text:"enum",value:"enum"},{text:"date",value:"date"},{text:"datetime",value:"datetime"},{text:"relation",value:"relation"}],$t={props:{name:{type:String,default:""}},data:function(t){return{snackbar:!1,loading:!1,dialog:!1,TYPES:St,form:{attributes:[]},permissions:[],users:[]}},computed:{_id:function(){return this.form.id},breadcrumbs:function(){return[{text:"roles",disabled:!1,href:"#/roles"},{text:this.name,disabled:!0}]}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetch();case 1:case"end":return t.stop()}}),null,this)},methods:{fetch:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,s.a.awrap(this.$serviceFactory("roles").getOne({name:this.name}));case 4:return t=e.sent,e.next=7,s.a.awrap(this.$serviceFactory("users").getAll({role:t.id}));case 7:this.users=e.sent,this.form=t,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn(e.t0),this.snackbar=!0;case 15:return e.prev=15,this.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),null,this,[[0,11,15,18]])},deleteItem:function(t){!function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}(this._attributes,t)},addField:function(){this._attributes.push({name:"",editable:!0,type:"string"})},edit:function(t){this.dialog=!0},saveChanges:function(t){var e;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),n.prev=1,this.loading=!0,n.next=5,s.a.awrap(this.$serviceFactory("roles").putById(this._id,t));case 5:e=n.sent,console.log(e);case 7:return n.prev=7,this.loading=!1,n.finish(7);case 10:case"end":return n.stop()}}),null,this,[[1,,7,10]])},deleteType:function(t){var e;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,s.a.awrap(this.$serviceFactory("roles").deleteById(this._id));case 4:e=t.sent,console.log(e);case 6:return t.prev=6,this.loading=!1,t.finish(6);case 9:case"end":return t.stop()}}),null,this,[[0,,6,9]])}}};function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ct=[{path:"/roles",component:jt,props:!0},{path:"/roles/:name",component:Object(c.a)($t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-snackbar",{attrs:{timeout:5e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    Something went wrong\n    "),n("v-btn",{attrs:{dark:"",text:""},nativeOn:{click:function(e){t.snackbar=!1}}},[t._v("\n      Close\n    ")])],1),t._v(" "),n("v-row",[n("v-breadcrumbs",{attrs:{items:t.breadcrumbs,divider:">"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"primary",on:{click:function(e){return t.saveChanges(t.form)}}},[t._v("\n      Save changes\n    ")]),t._v(" "),n("v-btn",{staticClass:"mx-2 error",on:{click:function(e){return t.deleteType(t.form)}}},[t._v("\n      Delete type\n    ")])],1),t._v(" "),n("v-data-table",{attrs:{headers:[{value:"email",text:"Email"}],items:t.users}}),t._v(" "),t._l(t.permissions||[],(function(e,r){return[n("v-card",{key:r,staticClass:"mt-5"},[n("v-card-title",[n("div",[t._v("\n          Roles & permissions ("+t._s(e.text)+")\n        ")]),t._v(" "),n("v-spacer")],1),t._v("\n      "+t._s(t.form.permissions[e.text])+"\n      "),n("TypePermissions",{model:{value:t.form.permissions[e.text],callback:function(n){t.$set(t.form.permissions,e.text,n)},expression:"form.permissions[role.text]"}})],1)]})),t._v("\n\n  "+t._s(t.form.permissions)+"\n\n  ")],2)}),[],!1,null,null,null).exports,props:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.params)}}];function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var At={props:{name:{type:String,default:"pages"},status:{type:String,default:""},id:{type:String,default:""},headers:{type:Array,default:function(){return[{text:"Title",value:"title"},{text:"url",value:"url"},{text:"Datum",value:"date"}]}}},data:function(){return{selection:[],loading:!1,items:[],totalItems:0,options:{},props:{id:{},url:{},body:{type:"textarea"},pageblock:{type:"json"}}}},computed:{_breadcrumbs:function(){return[{text:"Dashboard",disabled:!1,href:"/"},{text:this.name,disabled:!0,href:"breadcrumbs_link_2"}]}},watch:{status:function(){this.fetch()}},created:function(){this.fetch()},methods:{rowClick:function(t){window.open(t.url)},toLink:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"/pages/edit/".concat(t.id)},fetch:function(){var t,e,n,r,a=arguments;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},i.prev=1,this.loading=!0,i.next=5,s.a.awrap(this.$service.getWithTotalItems(this.name,It({state:"published"===this.status?"NULL":this.status},t)));case 5:e=i.sent,n=e.items,r=e.totalItems,this.totalItems=r,this.items=n;case 9:return i.prev=9,this.loading=!1,i.finish(9);case 12:case"end":return i.stop()}}),null,this,[[1,,9,12]])},onClickDelete:function(){var t,e,n=this,r=arguments;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:[];try{this.loading=!0,e=t.map((function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","trash"===t.state?n.$service.deleteById("pages",t.id):n.$service.updateById("pages",t.id,{state:"trash"}));case 1:case"end":return e.stop()}}))})),Promise.all(e).then((function(t){console.log(t),n.fetch()}))}catch(i){console.warn(i),this.$snackbar("Something went wrong")}finally{this.loading=!1}case 2:case"end":return a.stop()}}),null,this)}}},Bt=Object(c.a)(At,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.selection.length?n("v-btn",{staticClass:"mx-2 error",on:{click:function(e){return t.onClickDelete(t.selection)}}},[t._v("\n    Move to trash\n  ")]):t._e(),t._v(" "),n("v-data-table",{attrs:{"show-select":"",loading:t.loading,headers:t.headers,items:t.loading?[]:t.items,"server-items-length":t.totalItems,options:t.options},on:{"update:options":function(e){t.options=e},"click:row":t.rowClick},scopedSlots:t._u([{key:"item.title",fn:function(e){var r=e.value,a=e.item;return[n("router-link",{attrs:{to:t.toLink(a)}},[t._v("\n        "+t._s(r||"No name")+"\n      ")])]}},{key:"item.url",fn:function(e){var r=e.value,a=e.item;return[n("a",{attrs:{target:"_blank",href:t.toLink(a)}},[t._v(t._s(r||"No name"))])]}}]),model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}})],1)}),[],!1,null,null,null).exports,Lt={components:{Table:Bt},props:{status:{type:String,default:""},tabs:{type:Array,default:function(){return[{tab:"One",content:"Tab 1 Content"},{tab:"Two",content:"Tab 2 Content"}]}}},data:function(){return{tab:null}},computed:{_breadcrumbs:function(){return[{text:"Dashboard",disabled:!1,href:"/"},{text:"Pages",disabled:!1,href:"#/pages"},{text:this.status,disabled:!0,href:"breadcrumbs_link_2"}]}}},Rt=Object(c.a)(Lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-breadcrumbs",{attrs:{items:t._breadcrumbs,divider:">"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mx-2 primary",attrs:{to:"/pages/new"}},[t._v("\n      Create new page\n    ")])],1),t._v(" "),n("v-card",[n("v-tabs",{attrs:{dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(e){return n("v-tab",{key:e.tab,attrs:{to:e.path}},[t._v("\n        "+t._s(e.tab)+"\n      ")])})),1),t._v(" "),n("Table",{attrs:{status:t.status}})],1)],1)}),[],!1,null,null,null).exports;function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){Ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kt={props:{id:{type:String},title:{type:String},value:{type:Object,default:function(){return{}}},props:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,form:Ut({},this.value)}},computed:{},created:function(){var t;return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.id){e.next=5;break}return e.next=3,s.a.awrap(this.$service.getById("pages",this.id));case 3:t=e.sent,this.form=t;case 5:case"end":return e.stop()}}),null,this)},methods:{validate:function(t){this.$refs.form.validate()&&this.submit(t)},submit:function(t){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,this.id),e.prev=1,this.loading=!0,e.next=5,s.a.awrap(this.$service.createOrUpdateById("pages",this.id,t));case 5:this.$emit("success");case 6:return e.prev=6,this.loading=!1,this.$emit("input",!1),e.finish(6);case 10:case"end":return e.stop()}}),null,this,[[1,,6,10]])},onClickDelete:function(t){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,s.a.awrap(this.$service.deleteById("pages",this.id));case 4:this.$emit("success");case 5:return t.prev=5,this.loading=!1,this.$emit("input",!1),t.finish(5);case 9:case"end":return t.stop()}}),null,this,[[0,,5,9]])}}},zt={components:{Form:Object(c.a)(Kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.validate(t.form)}}},[n("v-row",[n("v-col",{attrs:{cols:"8"}},[n("div",{attrs:{contenteditable:""},domProps:{innerHTML:t._s(t.form.body)},on:{blur:function(e){t.form.body=e.target.innerHTML}}},[t._v("\n        loading...\n      ")])]),t._v(" "),n("v-col",[n("v-text-field",{attrs:{label:"Page title",placeholder:"e.g. Homepage"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),n("v-text-field",{attrs:{label:"Url",placeholder:"e.g. /about/us"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),t._v(" "),n("v-textarea",{attrs:{label:"Page content"},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}}),t._v(" "),t._v("\n      "+t._s(t.form.blocks)+"\n    ")],1)],1),t._v(" "),n("v-row",[n("v-btn",{attrs:{loading:t.loading,color:"primary",text:"",type:"submit"}},[t._v("\n      Apply\n    ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{loading:t.loading,color:"error",text:""},on:{click:function(e){return t.onClickDelete(t.form)}}},[t._v("\n      Delete\n    ")])],1)],1)}),[],!1,null,null,null).exports},props:{id:{type:String,default:""},value:{},name:{type:String,default:""}},data:function(){return{tab:null}},computed:{_breadcrumbs:function(){return[{text:"Dashboard",disabled:!1,href:"/"},{text:"Pages",disabled:!1,href:"#/pages"},{text:this.id?"Edit":"New",disabled:!0}]}},methods:{success:function(){this.$snackbar("saved")}}},Ht=Object(c.a)(zt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-row",[e("v-breadcrumbs",{attrs:{items:this._breadcrumbs,divider:">"}}),this._v(" "),e("v-spacer")],1),this._v(" "),e("v-card",[e("v-card-text",[e("Form",this._b({on:{success:this.success}},"Form",this.$props,!1))],1)],1)],1)}),[],!1,null,null,null).exports,Gt=[{tab:"Published",path:"/pages/published",component:Bt,props:function(t){return{name:"pages",value:t.query}}},{tab:"Draft",path:"/pages/draft",component:Bt,props:function(t){return{name:"pages",value:t.query}}},{tab:"Trash",path:"/pages/trash",component:Bt,props:function(t){return{name:"pages",value:t.query}}}];function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Jt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yt=[{path:"/pages",redirect:"/pages/published"},{path:"/pages/new",component:Ht,props:function(t){return{name:"pages",value:t.query}}},{path:"/pages/:status",component:Rt,props:function(t){return qt({name:"pages",tabs:Gt},t.params)}},{path:"/pages/edit/:id",component:Ht,props:function(t){return qt({name:"pages",value:t.query},t.params)}}],Wt={props:{name:{type:String,default:"media"}},data:function(t){return{form:{},items:[],itemsManual:[]}},created:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(this.$service.getAll(this.name,{}));case 2:return this.items=t.sent,t.next=5,s.a.awrap(this.$service.getAll("uploads",{}));case 5:this.itemsManual=t.sent;case 6:case"end":return t.stop()}}),null,this)},methods:{upload:function(t){var e;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("uploading"),this.$snackbar("Uploading file..."),n.prev=2,n.next=5,s.a.awrap(this.$service.fetch("/upload",{method:"POST",headers:{},body:t}));case 5:e=n.sent,console.log(e),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),console.warn(n.t0),this.$snackbar("upload failed");case 13:case"end":return n.stop()}}),null,this,[[2,9]])}}},Vt=[{path:"/media",component:Object(c.a)(Wt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("UploadPicture",{on:{drop:this.upload}}),this._v(" "),e("Grid",{attrs:{items:this.items}}),this._v("\n\n  Manual uploads\n  "),e("Grid",{attrs:{items:this.itemsManual}})],1)}),[],!1,null,null,null).exports}];function Zt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Xt=[].concat(Zt(B),[{path:"/",redirect:"/settings"}],Zt(bt),[{text:"Themes",path:"/themes",component:b,props:function(t){return{name:"themes"}}}],Zt(Vt),[{text:"blocks",path:"/blocks",component:b,props:function(t){return{name:"blocks"}}}],Zt(Yt),Zt(w),Zt(nt),Zt(Ct),[{path:"/settings",component:N,props:!0},{path:"*",component:m,props:!0}]),Qt=n(20);a.a.use(Qt.a);var te=new Qt.a({routes:Xt,linkActiveClass:"active"}),ee=n(21);function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(n),!0).forEach((function(e){ae(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ie=function(t){return re({},t)},se=window.localStorage,oe={state:{user:ie(S.currentTokenData()),company:JSON.parse(se.getItem("company"))||{}},getters:{getUser:function(t){return t.user}},mutations:{SET_USER:function(t,e){t.user=ie(e)},SET_COMPANY:function(t,e){t.company=e,se.setItem("company",JSON.stringify(e))}},actions:{SET_COMPANY:function(t,e){t.commit("SET_COMPANY",e)},SET_USER:function(t,e){t.commit("SET_USER",e)},USER_CREATE:function(t,e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",S.signup(e));case 1:case"end":return t.stop()}}))},USER_LOGIN:function(t,e){var n,r;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(S.login(e));case 2:return n=a.sent,r=S.parseJwt(n.access_token),t.commit("SET_USER",re({username:e.username||e.email},r)),a.abrupt("return",r);case 6:case"end":return a.stop()}}))},logoutUser:function(t,e){S.logout(),t.commit("SET_USER",null)}}};function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach((function(e){ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pe=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},de=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(t,e),new Promise((function(t,e){return setTimeout((function(){return e(new Error("timeout"))}),n)}))])},fe=function(t){if(200===t.status)return t;throw new Error(t.statusText)},ve=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return{fetch:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET"},r=t.api,a=void 0===r?"http://localhost:8666/api":r,i=t.headers,s=void 0===i?"":i;return de("".concat(a).concat(e),le({},n,{headers:le({"Content-Type":"application/json"},s)})).then(fe).then((function(t){return t.json()}))},getAll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch("/".concat(e,"?").concat(pe(t)),{method:"GET"})},getOne:function(){var t,n,r=arguments;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},a.next=3,s.a.awrap(this.fetch("/".concat(e,"?").concat(pe(t)),{method:"GET"}));case 3:return n=a.sent,a.abrupt("return",n[0]);case 5:case"end":return a.stop()}}),null,this)},getWithTotalItems:function(){var t,n,r=arguments;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},a.next=3,s.a.awrap(this.fetch("/".concat(e,"?").concat(pe(t)),{method:"GET"}));case 3:return n=a.sent,a.abrupt("return",{items:n,totalItems:n.length});case 5:case"end":return a.stop()}}),null,this)},getById:function(t){return this.fetch("/".concat(e,"/").concat(t),{method:"GET"})},createOrUpdateById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return delete e._id,t?this.updateById(t,e):this.insert(e)},insert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return delete t._id,this.fetch("/".concat(e),{method:"POST",body:JSON.stringify(t)})},updateById:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return delete n._id,this.fetch("/".concat(e,"/").concat(t),{method:"PATCH",body:JSON.stringify(n)})},putById:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return delete n._id,this.fetch("/".concat(e,"/").concat(t),{method:"PATCH",body:JSON.stringify(n)})},deleteById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.fetch("/".concat(e,"/").concat(t),{method:"DELETE"})}}}};function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function he(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}a.a.use(ee.a);var be=new URLSearchParams(window.location.search),ge={namespaced:!0,state:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){he(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},window.config,{headers:{Authorization:""},api:be.get("api")||window.config.api,defaultPrimaryKey:be.get("defaultPrimaryKey")||"id"}),mutations:{set:function(t,e){Object.assign(t,e)}}},ye=new ee.a.Store({modules:{UserStore:oe,settings:ge,plugins:{namespaced:!0,state:{items:[]},mutations:{set:function(t,e){t.items=e}},actions:{getAll:function(t){var e,n,r,a;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.rootState,n=t.commit,r=ve(e.settings),i.next=4,s.a.awrap(r("plugins").getAll());case 4:a=i.sent,n("set",a);case 6:case"end":return i.stop()}}))},update:function(t,e){var n,r;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.rootState,t.commit,r=ve(n.settings),a.abrupt("return",r("plugins").updateById(e._id,e));case 3:case"end":return a.stop()}}))}}},types:{namespaced:!0,state:{items:[]},mutations:{set:function(t,e){t.items=e}},actions:{getAll:function(t){var e,n,r,a;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=t.rootState,n=t.commit,r=ve(e.settings),i.next=4,s.a.awrap(r("types").getAll());case 4:a=i.sent,n("set",a);case 6:case"end":return i.stop()}}))},update:function(t,e){var n,r;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.rootState,t.commit,r=ve(n.settings),a.abrupt("return",r("types").updateById(e._id,e));case 3:case"end":return a.stop()}}))}}}},state:{},actions:{},getters:{},mutations:{}}),_e=n(54);_e.keys().forEach((function(t){var e=_e(t),n=t.replace(/^.*[\\/]/,"").replace(/\.\w+$/,"");a.a.component(n,e.default||e)}));var we=n(22),xe=n.n(we);n(60);a.a.use(xe.a);var Oe=new xe.a({theme:{dark:!0},icons:{iconfont:"mdi"}});function ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){$e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pe=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},Ee=function(t){if(200===t.status)return t;throw new Error(t.statusText)};a.a.prototype.$service=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{fetchRaw:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET"},r=t.api,a=void 0===r?"http://localhost:8666/api":r,i=t.headers,s=void 0===i?"":i;return fetch("".concat(a).concat(e),Se({},n,{headers:Se({},s)})).then(Ee)},fetch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET"};return this.fetchRaw(t,e).then((function(t){return t.json()}))},getCollectionById:function(t){return this.fetch("/collections/".concat(t),{method:"GET"})},getCollectionByName:function(t){return this.fetch("/collections?name=".concat(t),{method:"GET"}).then((function(t){return t[0]}))},getCollectionSchemaByName:function(t){var e,n,r;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.awrap(this.getCollectionByName(t).then((function(t){return t.schemaJson})));case 2:return e=a.sent,n=Object.entries(e),r=n.map((function(t){var e=ke(t,2);return Se({name:e[0]},e[1])})),a.abrupt("return",r);case 6:case"end":return a.stop()}}),null,this)},getAll:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch("/".concat(t,"?").concat(Pe(e)),{method:"GET"})},getOne:function(t){var e,n,r=arguments;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=r.length>1&&void 0!==r[1]?r[1]:{},a.next=3,s.a.awrap(this.fetch("/".concat(t,"?").concat(Pe(e)),{method:"GET"}));case 3:return n=a.sent,a.abrupt("return",n[0]);case 5:case"end":return a.stop()}}),null,this)},getWithTotalItems:function(t){var e,n,r,a,i=arguments;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:{},o.next=3,s.a.awrap(this.fetchRaw("/".concat(t,"?").concat(Pe(e)),{method:"GET"}));case 3:return n=o.sent,o.next=6,s.a.awrap(n.json());case 6:return r=o.sent,a=n.headers.get("X-Total-Count")||999,o.abrupt("return",{items:r,totalItems:a});case 9:case"end":return o.stop()}}),null,this)},getById:function(t,e){return this.fetch("/".concat(t,"/").concat(e),{method:"GET"})},createOrUpdateById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log(e),e?this.updateById(t,e,n):this.create(t,n)},create:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch("/".concat(t),{method:"POST",body:JSON.stringify(e)})},updateById:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetch("/".concat(t,"/").concat(e),{method:"PATCH",body:JSON.stringify(n)})},putById:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetch("/".concat(t,"/").concat(e),{method:"PATCH",body:JSON.stringify(n)})},deleteById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.fetch("/".concat(t,"/").concat(e),{method:"DELETE"})}}}(ye.state.settings),a.a.prototype.$serviceFactory=ve(ye.state.settings),a.a.prototype.$snackbarState=a.a.observable({text:"loading...",visible:!1}),a.a.mixin({methods:{$snackbar:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t),this.$snackbarState.text=t,this.$snackbarState.color=e,this.$snackbarState.visible=!0}}}),a.a.config.productionTip=!1,window.vue=new a.a({router:te,store:ye,vuetify:Oe,render:function(t){return t(v)}}).$mount("#app")},function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s="undefined"!==typeof Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),o=s&&"undefined"!==typeof Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),c="undefined"!==typeof HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob,l=c||"undefined"!==typeof Uint8Array&&"undefined"!==typeof ArrayBuffer&&"undefined"!==typeof atob,u="undefined"!==typeof FileReader||"undefined"!==typeof URL,p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"resize",value:function(e,n,r){if("function"===typeof n&&(r=n,n={width:640,height:480}),!t.isSupported()||!e.type.match(/image.*/))return r(e,!1),!1;if(e.type.match(/image\/gif/))return r(e,!1),!1;var a=document.createElement("img");return a.onload=function(i){var s=a.width,o=a.height,l=!1;if(s>=o&&s>n.width?(o*=n.width/s,s=n.width,l=!0):o>n.height&&(s*=n.height/o,o=n.height,l=!0),l){var u=document.createElement("canvas");if(u.width=s,u.height=o,u.getContext("2d").drawImage(a,0,0,s,o),c)u.toBlob((function(t){r(t,!0)}),e.type);else{var p=t._toBlob(u,e.type);r(p,!0)}}else r(e,!1)},t._loadImage(a,e),!0}},{key:"_toBlob",value:function(t,e){var n,r=t.toDataURL(e).split(",");n=r[0].indexOf("base64")>=0?atob(r[1]):decodeURIComponent(r[1]);for(var a=new ArrayBuffer(n.length),i=new Uint8Array(a),c=0;c<n.length;c+=1)i[c]=n.charCodeAt(c);var l=r[0].split(":")[1].split(";")[0],u=null;if(s)u=new Blob([o?i:a],{type:l});else{var p=new window.BlobBuilder;p.append(a),u=p.getBlob(l)}return u}},{key:"_loadImage",value:function(t,e,n){if("undefined"===typeof URL){var r=new FileReader;r.onload=function(e){t.src=e.target.result,n&&n()},r.readAsDataURL(e)}else t.src=URL.createObjectURL(e),n&&n()}},{key:"isSupported",value:function(){return"undefined"!==typeof HTMLCanvasElement&&l&&u}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}(),d=function(t){return new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onloadend=function(){var t=r.result;e(t)}}))},f={props:{value:{type:String,default:""},showPreview:{type:Boolean,default:!1},width:{type:Number,default:320},height:{type:Number,default:240}},data:function(){return{src:this.value}},methods:{change:function(t){var e=this,n=t.target.files[0];p.resize(n,{width:320,height:240},(function(t,n){var r;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(d(t));case 2:r=n.sent,console.log(r),e.$emit("input",r);case 5:case"end":return n.stop()}}))}))}}},v=n(1),m=Object(v.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("input",{attrs:{id:"select",type:"file"},on:{change:this.change}}),this._v(" "),this.showPreview?e("v-img",{attrs:{id:"preview",src:this.value}}):this._e()],1)}),[],!1,null,null,null);e.default=m.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-breadcrumbs",{attrs:{items:t._breadcrumbs}}),t._v(" "),n("List",{attrs:{name:t.name,"title-key":t._itemTitle},on:{"click:item":t.onClickItem,"click:edit":t.onClickEdit,"click:create":function(e){t.dialog=!0}}},[n("template",{slot:"actions-right"})],2)],1)};r._withStripped=!0;var a=n(0),i=n.n(a),s={components:{List:n(13).default},props:{name:{type:String,default:""}},data:function(){return{loading:!1,form:{},dialog:!1,collection:{titleKey:"title"},schema:[],props:{}}},computed:{_breadcrumbs:function(){return[{text:"Dashboard",disabled:!1,href:"/"},{text:"Collections",disabled:!1,href:"/collections"},{text:this.name,disabled:!0,href:"breadcrumbs_link_2"}]},_itemTitle:function(){return this.collection.titleKey||"title"}},methods:{onClickItem:function(t){console.log("TODO")},onClickEdit:function(t){console.log("TODO")},createTable:function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,i.a.awrap(fetch("/api/collections/".concat(this.name,"/createfromjson"),{method:"GET"}));case 4:this.$emit("success");case 5:return t.prev=5,this.loading=!1,this.$emit("input",!1),t.finish(5);case 9:case"end":return t.stop()}}),null,this,[[0,,5,9]])}}},o=n(1),c=Object(o.a)(s,r,[],!1,null,null,null);c.options.__file="src/components/CollectionList.vue";e.default=c.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Columns")]),t._v("Selecting more than 6 columns will affect the readability of the table.\n  "),n("div",[n("p",[t._v("\n      Total selected\n      "),n("b",[t._v(t._s(t.selection.length))]),t._v(" columns.\n    ")]),t._v(" "),n("v-list",{staticClass:"pa-0"},[t._fixedHeaders.length?[t._l(t._fixedHeaders,(function(e){return n("v-list-item",{key:e.value,staticClass:"non-hoverable"},[n("Tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on;return[n("span",t._g({},a),[n("div",{staticClass:"mt-0 v-input v-input--hide-details theme--light v-input--selection-controls v-input--checkbox"},[n("div",{staticClass:"v-input__control"},[n("div",{staticClass:"v-input__slot"},[n("div",{staticClass:"v-input--selection-controls__input"},[n("v-icon",[t._v("info")])],1),t._v(" "),n("label",{staticClass:"v-label theme--light"},[t._v(t._s(e.text))])])])])])]}}],null,!0)},[t._v(" "),n("span",[t._v("This column will always be visible")])]),t._v(" "),n("v-spacer")],1)})),t._v(" "),n("v-divider")]:t._e()],2),t._v(" "),n("v-list",{directives:[{name:"sortable",rawName:"v-sortable:sorting",value:t._sortableHeaders,expression:"_sortableHeaders",arg:"sorting"}],staticClass:"pa-0",on:{sort:t.onSort}},t._l(t._sortableHeaders,(function(e){return n("v-list-item",{key:e.value,staticClass:"grab hoverable draggable"},[n("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",value:e,label:e.text},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}}),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"show-on-hover"},[n("v-icon",[t._v("drag_indicator")])],1)],1)})),1)],1)])};r._withStripped=!0;var a=n(31);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s={directives:{sortable:{inserted:function(t,e,n){var r=e.value;a.a.create(t,{onUpdate:function(t){var e=t.oldIndex,a=t.newIndex,i=r.splice(e,1);r.splice(a,0,i[0]),n.child.$emit("sort",r)}})}}},props:{value:{type:Array,default:function(){return[]}},headers:{type:Array,default:function(){return[]}}},data:function(t){return{selection:t.value,headersInOrder:t.headers}},computed:{_selectionFlat:function(){return this.selection.map((function(t){return t.value}))},_fixedHeaders:function(){return this.headers.filter((function(t){return t.fixed}))},_sortableHeaders:function(){return this.headers.filter((function(t){return!t.fixed}))},_inOrderSelection:function(){var t=this.headersInOrder,e=this._selectionFlat;return t.filter((function(t){var n=t.value;return e.includes(n)}))}},watch:{selection:function(){this.emitSelected()}},methods:{onSort:function(t){this.headersInOrder=t,this.emitSelected()},emitSelected:function(){var t=i(this._inOrderSelection);this.$emit("input",t)},closeColumnSelector:function(){this.$emit("close")}}},o=(n(55),n(1)),c=Object(o.a)(s,r,[],!1,null,null,null);c.options.__file="src/components/ColumnSelector.vue";e.default=c.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-text-field",{attrs:{label:"Server"},model:{value:t.form.server,callback:function(e){t.$set(t.form,"server",e)},expression:"form.server"}}),t._v(" "),n("v-btn",{staticClass:"primary",attrs:{loading:t.loading,type:"submit"}},[t._v("\n      Connect\n    ")])],1)])};r._withStripped=!0;var a=n(0),i=n.n(a),s=n(4),o=n.n(s),c={components:{},data:function(){return{form:{server:"http://localhost:8888/superadmin"},loading:!1}},created:function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}))},methods:{submit:function(t){var e,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.loading=!0,r.next=4,i.a.awrap(o.a.get(t.server));case 4:e=r.sent,console.log(e),n=e.data,this.items=n,r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.warn(r.t0),alert("Not a valid server");case 14:return r.prev=14,this.loading=!1,r.finish(14);case 17:case"end":return r.stop()}}),null,this,[[0,10,14,17]])}}},l=n(1),u=Object(l.a)(c,r,[],!1,null,null,null);u.options.__file="src/components/ConnectToServer.vue";e.default=u.exports},function(t,e,n){"use strict";n.r(e);var r=n(14),a=n(19),i={components:{Row:r.default,ProgressLinear:a.default},props:{headers:{type:Array,default:function(){return[]}},selectable:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},paginationEnabled:{type:Boolean,default:!0},value:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{}}},noItems:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},noItemsText:{type:String,default:"No items found."}},data:function(){return{}},computed:{totalItems:function(){var t=this.paginationEnabled,e=this.pagination;if(t)return e.totalItems},rowsPerPageItems:function(){return this.paginationEnabled?[10,20,50,100]:[-1]},hasItems:function(){return this.value.length>0}},methods:{updatePagination:function(){}}},s=n(1),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-table",t._g(t._b({attrs:{value:t.value,"must-sort":"",headers:t.headers,items:t.items,loading:t.loading,"select-all":!!t.items.length&&t.selectable,"hide-actions":!t.paginationEnabled,"total-items":t.totalItems,"rows-per-page-items":t.rowsPerPageItems,"disable-initial-sort":!0,pagination:t.pagination},on:{input:function(e){return t.$emit("input",e)},"update:pagination":t.updatePagination},scopedSlots:t._u([{key:"progress",fn:function(){return[t._t("progress",[n("ProgressLinear")])]},proxy:!0},t.loading?null:{key:"items",fn:function(e){return[n("Row",{attrs:{headers:t.headers,row:e,selectable:t.selectable},on:{click:function(n){return t.$emit("click",e)}},scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0),model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"row.selected"}})]}}],null,!0)},"v-data-table",t.$attrs,!1),t.$listeners),[t._v(" "),t._t("actions-append",null,{slot:"actions-append"}),t._v(" "),t._t("actions-prepend",null,{slot:"actions-prepend"}),t._v(" "),t._t("footer",null,{slot:"footer"}),t._v(" "),t._t("page-text",null,{slot:"page-text"}),t._v(" "),t._t("no-data",[n("div",{staticClass:"text-xs-center ma-3"},[n("b",[t._v(t._s(t.loading?t.loadingText:t.noItemsText))])])],{slot:"no-data"}),t._v(" "),t._v(" "),t._t("no-results",[n("v-layout",[n("v-spacer"),t._v("Create your first item\n        "),n("v-spacer")],1)],{slot:"no-results"})],2)],1)}),[],!1,null,null,null);e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r={methods:{toggleAll:function(){this.selected=this.selected.length?[]:this.items.slice(),this.$emit("input",this.selected)},changeSort:function(t){this.pagination.sortBy===t?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=t,this.pagination.descending=!1)}}},a=(n(56),n(1)),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[t.selectable?n("th",[n("v-checkbox",{attrs:{"input-value":t.props.all,indeterminate:t.props.indeterminate,primary:"","hide-details":""},on:{click:function(e){return e.stopPropagation(),t.toggleAll(e)}}})],1):t._e(),t._v(" "),t._l(t.props.headers,(function(e){return n("th",{key:e.text,class:["column sortable",!1!==e.sortable?"sortable":"",t.pagination.descending?"desc":"asc",e.value===t.pagination.sortBy?"active":""],on:{click:function(n){return t.changeSort(e.value)}}},[!1!==e.sortable?n("v-icon",{attrs:{small:""}},[t._v("\n      arrow_upward\n    ")]):t._e(),t._v("\n    "+t._s(e.text)+"\n  ")],1)}))],2)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:t.width,value:t.value,persistent:t.persistent},on:{input:function(e){return t.$emit("input",e)}}},[n("Card",{staticClass:"theme--light mx-auto"},[n("span",{staticClass:"card-title"},[t._t("title")],2),t._v(" "),n("span",{staticClass:"card-content"},[t._t("default")],2),t._v(" "),t._t("actions-container",[n("v-divider"),t._v(" "),n("v-row",{staticClass:"n2-pa-2"},[t._t("actions")],2)])],2)],1)};r._withStripped=!0;var a={props:{value:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},width:{type:String,default:""}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/Dialog.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r={data:function(t){return{over:!1}},methods:{onDragover:function(t){},onDragenter:function(t){this.over=!0},onDragleave:function(t){this.over=!1},onDrop2:function(t){t.stopPropagation(),t.preventDefault(),console.log(t);var e=t.dataTransfer.getData("text/plain");console.log(e)},onDrop:function(t){var e=this;console.log(t.dataTransfer);var n=t.dataTransfer.getData("text");if(console.log("Drop of text",n),n)console.log(n);else{var r=t.dataTransfer.items;if(r.length&&"file"===r[0].kind){var a=r[0].getAsFile();console.log(a.name),console.log(a);var i=new FileReader;i.onload=function(t){console.log(t.target);var n=t.target.result;console.log(n);var r=JSON.parse(n);e.$emit("input",r)},console.log(a),i.readAsText(a)}}}}},a=(n(57),n(1)),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropzone",class:t.over?"dropzone__over":"",on:{drop:function(e){return e.stopPropagation(),e.preventDefault(),t.onDrop(e)},dragover:function(e){return e.stopPropagation(),e.preventDefault(),t.onDragover(e)},dragenter:function(e){return e.stopPropagation(),e.preventDefault(),t.onDragenter(e)},dragleave:function(e){return e.stopPropagation(),e.preventDefault(),t.onDragleave(e)}}},[t._t("default",[t._v("\n    Drop files here or click to upload.\n    "),n("input",{attrs:{type:"file"}})])],2)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=n(15),a=n(16),i=n(17),s={components:{InputDate:r.default,InputDateTime:a.default,InputSelectRelation:i.default},props:{name:{type:String,default:"collections"},primaryKey:{type:String,default:"_id"},title:{type:String,default:"No title"},value:{type:Object,description:"The form values",default:function(){return{}}},fields:{type:Array,default:function(){return[{name:"name",type:"string",formType:"text",minLength:3,unique:!0,configurable:!1,required:!0}]}}},data:function(){return{rules:{required:function(t){return!!t||"Required."},counter:function(t){return t.length<=20||"Max 20 characters"},email:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||"Invalid e-mail."}},loading:!1}},computed:{options:function(){return this.value}},methods:{getRules:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return t.rules[e]}))}}},o=n(1),c=Object(o.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.fields,(function(e,r){return n("div",{key:r},["string"===e.type?[n("v-text-field",t._b({attrs:{autocomplete:"new-password",label:e.label||e.name,clearable:"",rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-text-field",e,!1))]:"number"===e.type?[n("v-text-field",t._b({attrs:{label:e.label||e.name,clearable:"",rules:t.getRules(e.rules),type:"number"},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-text-field",e,!1))]:"textarea"===e.type?[n("v-textarea",t._b({attrs:{label:e.label||e.name,clearable:"",rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-textarea",e,!1))]:"boolean"===e.type?[n("v-switch",{attrs:{label:e.label||e.name,rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}})]:"image"===e.type?[n("v-text-field",t._b({attrs:{label:e.label||e.name,clearable:"",type:"file",rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-text-field",e,!1))]:"avatar"===e.type?[n("InputAvatar",t._b({attrs:{label:e.label||e.name,clearable:"",type:"file",rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"InputAvatar",e,!1))]:"json"===e.type?[n("v-textarea",t._b({attrs:{label:e.label||e.name,rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-textarea",e,!1))]:"enum"===e.type?[n("v-select",t._b({attrs:{items:e.enum.map((function(t){return{value:t,text:t}})),label:e.label||e.name,rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-select",e,!1))]:"date"===e.type?[n("InputDate",t._b({attrs:{clearable:"",label:e.label||e.name,rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"InputDate",e,!1))]:"datetime"===e.type?[n("InputDateTime",t._b({attrs:{clearable:"",label:e.label||e.name,rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"InputDateTime",e,!1))]:"relation"===e.type||e.target?[n("InputSelectRelation",t._b({attrs:{value:t.options[e.name],"primary-key":t.primaryKey,label:e.label||e.name},on:{input:function(n){t.options[e.name]=n||null}}},"InputSelectRelation",e,!1))]:[n("v-text-field",t._b({attrs:{autocomplete:"new-password",label:e.label||e.name,rules:t.getRules(e.rules)},model:{value:t.options[e.name],callback:function(n){t.$set(t.options,e.name,n)},expression:"options[field.name]"}},"v-text-field",e,!1))]],2)})),t._v(" "),n("v-btn",{staticClass:"d-none",attrs:{type:"submit"}},[t._v("\n    Apply\n  ")])],2)}),[],!1,null,null,null);e.default=c.exports},function(t,e,n){"use strict";n.r(e);var r={props:{items:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{"grid-list-xl":""}},[n("v-layout",{attrs:{wrap:""}},[t.loading?n("v-flex",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._e(),t._v(" "),t.loading?t._e():[t._l(t.items,(function(e,r){return[n("v-flex",{key:r,attrs:{xs3:""}},[t._t("card",[t._v("\n            "+t._s(e)+"\n          ")],{item:e})],2)]}))]],2)],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r={props:{value:{type:String,default:""}},methods:{onInput:function(t){this.$emit("input",t)}}},a=n(1),i=Object(a.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-avatar",{attrs:{size:120,color:"grey lighten-4"}},[e("v-img",{attrs:{src:this.value,contain:"",alt:"avatar"}})],1),this._v(" "),e("ImageResize",{attrs:{value:this.value},on:{input:this.onInput}})],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.items||[],(function(e,r){return[n("div",{key:r},[n("v-list-item",{staticClass:"reveal-on-hover"},[n("v-row",{staticClass:"ma-0"},[e.editable?[n("v-col",{attrs:{xs4:""}},[n("v-text-field",{attrs:{label:"Name",placeholder:"Add new field","hide-details":""},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[t._v("\n              ???\n            ")])]:[n("v-col",{attrs:{xs4:""}},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),n("v-col",{attrs:{cols:"6"}},[t._v("\n              ??\n            ")])],t._v(" "),n("v-col",{attrs:{xs2:""}},[n("v-btn",{staticClass:"hide-by-default",attrs:{icon:""},on:{click:function(n){return t.toggleEdit(e)}}},[n("v-icon",[t._v("edit")])],1),t._v(" "),n("v-btn",{staticClass:"hide-by-default",attrs:{icon:""}},[n("v-icon",[t._v("close")])],1)],1)],2)],1),t._v(" "),n("v-divider")],1)]})),t._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{outlined:""},on:{click:t.addField}},[t._v("\n    Add another field\n  ")])],2)};r._withStripped=!0;var a={props:{items:{type:Array,default:function(){return[]}}},data:function(){return{dialog:!1,form:{},value:{attributes:[]}}},methods:{toggleEdit:function(t){console.log(t),this.dialog=!0},deleteItem:function(t){!function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.items,t)},addField:function(){this.items.push({name:"",editable:!0,params:{type:"string"}})}}},i=(n(58),n(1)),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/DynamicList.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r={props:{items:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},imageKey:{type:String,default:"url"}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{"grid-list-xl":""}},[n("v-row",[t.loading?n("v-col",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t._e(),t._v(" "),t.loading||t.items.length?t._e():n("v-col",[n("v-alert",{attrs:{border:"left",color:"indigo",dark:""}},[t._v("\n        No items\n      ")])],1)],1),t._v(" "),t.loading?t._e():n("v-row",[t._l(t.items,(function(e,r){return[n("v-col",{key:r,attrs:{cols:"3"}},[t._t("card",[n("v-card",{on:{click:function(n){return t.$emit("click:item",e)}}},[n("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:e[t.imageKey]||e.image}},[n("v-card-title",[t._v(t._s(e.title||e.name))])],1),t._v(" "),n("v-card-subtitle",{staticClass:"pb-0"},[t._v("\n              "+t._s(e.subTitle)+"\n            ")]),t._v(" "),n("v-card-text",{staticClass:"text--primary"},[t._v("\n              "+t._s(e.description)+"\n            ")])],1)],{item:e})],2)]}))],2)],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("v-layout",{staticClass:"pa-4",attrs:{"justify-center":"","align-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",size:20,width:2,color:"primary"}}),t._v(" "),n("div",{staticClass:"ml-2"},[t._v("\n      Loading...\n    ")])],1):t._e(),t._v(" "),t.loading?t._e():t._t("default")],2)};r._withStripped=!0;var a={props:{loading:{type:Boolean,default:!0}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/Loader.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{value:t.value,app:"",clipped:"",dark:"",color:"#223440","mobile-break-point":"600",width:"200"},on:{input:function(e){return t.$emit("input",e)}}},[n("v-list",{attrs:{dense:""}},[t._l(t.items,(function(e){return[e.heading?n("v-row",{key:e.heading,attrs:{align:"center"}},[n("v-col",{attrs:{cols:"6"}},[e.heading?n("v-subheader",[t._v("\n            "+t._s(e.heading)+"\n          ")]):t._e()],1)],1):e.children?n("v-list-group",{key:e.text,attrs:{"prepend-icon":e.model?e.icon:e["icon-alt"],"append-icon":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"pa-0"},[t._v("\n                "+t._s(e.text)+"\n              ")])],1)],1)]},proxy:!0}],null,!0),model:{value:e.model,callback:function(n){t.$set(e,"model",n)},expression:"item.model"}},[t._v(" "),t._l(e.children,(function(e,r){return n("v-list-item",{key:r,attrs:{to:e.path}},[t.showIcons?[e.icon?n("v-list-item-action",[n("v-icon",[t._v(t._s(e.icon))])],1):t._e()]:t._e(),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],2)}))],2):n("v-list-item",{key:e.text,attrs:{to:e.path}},[t.showIcons?[n("v-list-item-action",[n("v-icon",[t._v(t._s(e.icon))])],1)]:t._e(),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("\n            "+t._s(e.text)+"\n          ")])],1)],2)]}))],2)],1)};r._withStripped=!0;var a={props:{value:{type:Boolean,default:!0},showIcons:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}}},data:function(){return{}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/NavigationDrawer.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r={props:{timeout:{type:Number,default:2e3}},data:function(){return{show:!1,state:{text:"",dismissable:!1}}},created:function(){},methods:{message:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.show&&console.warn("Only one snackbar allowed, closing previous.",t),this.show=!0,this.state.text=t,this.state.dismissable=e,!0}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-snackbar",{attrs:{timeout:t.timeout,color:t.state.color},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v("\n    "+t._s(t.state.text)+"\n    "),t.state.dismissable?[n("v-btn",{attrs:{dark:"",text:""},nativeOn:{click:function(e){t.show=!1}}},[t._v("\n        Close\n      ")])]:t._e()],2)],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-snackbar",{attrs:{timeout:t.state.timeout,color:t.state.color},model:{value:t.showSnackbar,callback:function(e){t.showSnackbar=e},expression:"showSnackbar"}},[t._v("\n    "+t._s(t.state.text)+"\n    ")]),t._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[t._v("\n        "+t._s(t.state.title)+"\n      ")]),t._v(" "),n("v-card-text",[t.state.text?n("p",[t._v("\n          "+t._s(t.state.text)+"\n        ")]):n("p",[t._v("\n          We are very sorry but at the moment the server can't be reached, please try it later.\n        ")])]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.showDialog=!1}}},[t._v("\n          Ok\n        ")])],1)],1)],1)],1)};r._withStripped=!0;var a={computed:{state:function(){return this.$store.state.ui.snackbar},showSnackbar:{get:function(){return this.state.show&&!this.state.modal},set:function(){this.state.show=!1}},showDialog:{get:function(){return this.state.show&&this.state.modal},set:function(){this.state.show=!1}}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/StoreMessages.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.selection.length?n("v-btn",{staticClass:"mx-2 error",on:{click:function(e){return t.onClickDelete(t.selection)}}},[t._v("\n    Move to trash\n  ")]):t._e(),t._v(" "),n("v-data-table",{attrs:{"show-select":"",loading:t.loading,headers:t.headers,items:t.loading?[]:t.items,"server-items-length":t.totalItems,options:t.options},on:{"update:options":function(e){t.options=e},"click:row":t.rowClick},scopedSlots:t._u([{key:"item.title",fn:function(e){var r=e.value,a=e.item;return[n("router-link",{attrs:{to:t.toLink(a)}},[t._v("\n        "+t._s(r||"No name")+"\n      ")])]}},{key:"item.url",fn:function(e){var r=e.value,a=e.item;return[n("a",{attrs:{target:"_blank",href:t.toLink(a)}},[t._v(t._s(r||"No name"))])]}}]),model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}})],1)};r._withStripped=!0;var a=n(0),i=n.n(a);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={props:{name:{type:String,default:"pages"},status:{type:String,default:""},id:{type:String,default:""},headers:{type:Array,default:function(){return[{text:"Title",value:"title"},{text:"url",value:"url"},{text:"Datum",value:"date"}]}}},data:function(){return{selection:[],loading:!1,items:[],totalItems:0,options:{},props:{id:{},url:{},body:{type:"textarea"},pageblock:{type:"json"}}}},computed:{_breadcrumbs:function(){return[{text:"Dashboard",disabled:!1,href:"/"},{text:this.name,disabled:!0,href:"breadcrumbs_link_2"}]}},watch:{status:function(){this.fetch()}},created:function(){this.fetch()},methods:{rowClick:function(t){window.open(t.url)},toLink:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"/pages/edit/".concat(t.id)},fetch:function(){var t,e,n,r,a=arguments;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},s.prev=1,this.loading=!0,s.next=5,i.a.awrap(this.$service.getWithTotalItems(this.name,o({state:"published"===this.status?"NULL":this.status},t)));case 5:e=s.sent,n=e.items,r=e.totalItems,this.totalItems=r,this.items=n;case 9:return s.prev=9,this.loading=!1,s.finish(9);case 12:case"end":return s.stop()}}),null,this,[[1,,9,12]])},onClickDelete:function(){var t,e,n=this,r=arguments;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:[];try{this.loading=!0,e=t.map((function(t){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","trash"===t.state?n.$service.deleteById("pages",t.id):n.$service.updateById("pages",t.id,{state:"trash"}));case 1:case"end":return e.stop()}}))})),Promise.all(e).then((function(t){console.log(t),n.fetch()}))}finally{this.loading=!1}case 2:case"end":return a.stop()}}),null,this)}}},u=n(1),p=Object(u.a)(l,r,[],!1,null,null,null);p.options.__file="src/components/Table.vue";e.default=p.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-btn",{attrs:{outlined:""},on:{click:t.toggle}},[t._v("\n    "+t._s(t.label)+" "),n("v-icon",[t._v(t._s(t.icon))])],1),t._v(" "),t.value||t.show?n("div",[t._t("default")],2):t._e()],1)};r._withStripped=!0;var a={props:{label:{type:String,default:"Show more"},value:{type:Boolean,default:!1},iconDown:{type:String,default:"keyboard_arrow_down"},iconUp:{type:String,default:"keyboard_arrow_up"}},data:function(){return{show:!1}},computed:{icon:function(){return this.show?this.iconUp:this.iconDown}},methods:{toggle:function(){this.$emit("input",!this.value),this.show=!this.show}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/Toggle.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{"clipped-left":"",dense:"",app:"",color:"deep-purple accent-4"}},[n("v-app-bar-nav-icon",{on:{click:function(e){return e.stopPropagation(),t.toggle()}}},[n("v-icon",[t._v("menu")])],1),t._v(" "),n("v-toolbar-title",[t._v(t._s(t.title))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{target:"_blank",href:"/",text:""}},[n("v-icon",[t._v("mdi-export-variant")]),t._v("To site\n  ")],1),t._v(" "),n("TheProfileMenu")],1)};r._withStripped=!0;var a={components:{TheProfileMenu:n(18).default},props:{value:Boolean,title:{type:String,default:""}},methods:{toggle:function(){this.$emit("input",!this.value)}}},i=n(1),s=Object(i.a)(a,r,[],!1,null,null,null);s.options.__file="src/components/Toolbar.vue";e.default=s.exports},function(t,e,n){"use strict";n.r(e);var r={props:{value:{type:Object,default:function(){return{}}}},data:function(t){return{permissions:[{text:"find"},{text:"create"},{text:"findone"},{text:"delete"},{text:"update"}]}},watch:{form:function(t){this.$emit("input",t)}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  "+t._s(t.value)+"\n\n  "),t._l(t.permissions||[],(function(e,r){return[n("div",{key:r},[n("v-list-item",{staticClass:"reveal-on-hover"},[n("v-switch",{attrs:{label:e.text},model:{value:t.value[e.text],callback:function(n){t.$set(t.value,e.text,n)},expression:"value[item.text]"}})],1),t._v(" "),n("v-divider")],1)]}))],2)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r={data:function(){return{form:{}}},methods:{submit:function(t){console.log(t),this.$emit("submit",JSON.parse(t.name))}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submit(t.form)}}},[n("v-textarea",{attrs:{label:"Name",placeholder:"['users','resourcetypes']"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("v-btn",{staticClass:"primary",attrs:{type:"submit"}},[t._v("\n    Add multiple\n  ")])],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i={props:{value:{type:String,default:""}},data:function(t){return{over:!1,image:""}},methods:{onDragover:function(t){},onDragenter:function(t){this.over=!0},onDragleave:function(t){this.over=!1},onDrop:function(t){var e,n,r;return a.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:(e=t.dataTransfer.items).length&&"file"===e[0].kind&&(n=e[0].getAsFile(),console.log(n.name),console.log(n),(r=new FormData).append("fileToUpload",n),this.$emit("drop",r));case 2:case"end":return a.stop()}}),null,this)},render:function(){return'<img src="'.concat(this.value,'"/>')}}},s=(n(59),n(1)),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropregion",class:t.over?"dropregion__over":"",on:{drop:function(e){return e.stopPropagation(),e.preventDefault(),t.onDrop(e)},dragover:function(e){return e.stopPropagation(),e.preventDefault(),t.onDragover(e)},dragenter:function(e){return e.stopPropagation(),e.preventDefault(),t.onDragenter(e)},dragleave:function(e){return e.stopPropagation(),e.preventDefault(),t.onDragleave(e)}}},[t._t("default",[t._v("\n    "+t._s(t.value)+"\n    Drop files here or click to upload.\n    "),n("input",{attrs:{type:"file"}}),t._v(" "),n("img",{attrs:{src:t.value}})])],2)}),[],!1,null,null,null);e.default=o.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.$snackbarState.color},model:{value:t.$snackbarState.visible,callback:function(e){t.$set(t.$snackbarState,"visible",e)},expression:"$snackbarState.visible"}},[t._v("\n  "+t._s(t.$snackbarState.text)+"\n  "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.$snackbarState.visible=!1}}},[t._v("\n    Close\n  ")])],1)}),[],!1,null,null,null);e.default=a.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DataTable",{attrs:{items:[],"item-key":"sampleDate",headers:[],selectable:""},scopedSlots:t._u([{key:"headers",fn:function(){return[t._v("\n    headers\n  ")]},proxy:!0},{key:"actions-prepend",fn:function(){return[t._v("\n    actions-prepend\n  ")]},proxy:!0},{key:"actions-append",fn:function(){return[t._v("\n    actions-append\n  ")]},proxy:!0},{key:"page-text",fn:function(e){e.pageStart,e.pageStop,e.itemsLength;return[t._v("\n    page-text\n  ")]}},{key:"column-sampleDate",fn:function(e){e.row;var r=e.field;return t._l(r,(function(e,r){return n("v-chip",{key:r},[t._v("\n      "+t._s(e)+"\n    ")])}))}}])},[t._v(" "),t._v(" "),t._v(" "),n("template",{slot:"footer"},[t._v("\n    footer\n  ")]),t._v(" "),n("template",{slot:"no-data"},[t._v("\n    no-data\n  ")])],2)}),[],!1,null,null,null);e.default=a.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),a=Object(r.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("Toggle",this._b({},"Toggle",this.$props,!1),[e("pre",[this._v("    "),this._t("default"),this._v("\n    ")],2)])}),[],!1,null,null,null);e.default=a.exports}],[[32,2,0]]]);